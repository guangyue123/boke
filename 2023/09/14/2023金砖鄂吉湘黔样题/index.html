<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>2023金砖鄂吉湘黔样题 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="2023金砖职赛云计算赛项鄂吉湘黔省赛选拔赛A模块: OpenStack 平台部署与运维(30分)任务1 OpenStack私有云平台搭建(15分)1. 基础环境配置(2分)把 controller节点主机名设置为 controller ,  compute 节点主机名设置为 compute , 修改 hosts 文件将 IP 地映射为主机名, root 密码修改为 000000. 在 contr">
<meta property="og:type" content="article">
<meta property="og:title" content="2023金砖鄂吉湘黔样题">
<meta property="og:url" content="http://example.com/2023/09/14/2023%E9%87%91%E7%A0%96%E9%84%82%E5%90%89%E6%B9%98%E9%BB%94%E6%A0%B7%E9%A2%98/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="2023金砖职赛云计算赛项鄂吉湘黔省赛选拔赛A模块: OpenStack 平台部署与运维(30分)任务1 OpenStack私有云平台搭建(15分)1. 基础环境配置(2分)把 controller节点主机名设置为 controller ,  compute 节点主机名设置为 compute , 修改 hosts 文件将 IP 地映射为主机名, root 密码修改为 000000. 在 contr">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/377d8a1e6a3b066832cb2547df61230dc6d6dfa0.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/523831b5386dd9031b4d103c2c7c2246c7c8f83d.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/e86aa9bfee0c15fe5ed6682ff550d83cc8b6e24e/0163f632cec7f6fe271dddd9905bbe4588b053be.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/e86aa9bfee0c15fe5ed6682ff550d83cc8b6e24e/2b9a297a26f9ebb07258d074849a8be2c705f1b3.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/e86aa9bfee0c15fe5ed6682ff550d83cc8b6e24e/7da21861e3215cb4a53c9168067cf3c0d0d5edc4.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/0a373709f01bbe1a490bd5e2dd80bc0d710be9fc.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/c5a616691064bed65831c5cf013d2cbc749fc0d1.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/bf2cfd73ade80a4be5cb231f5ca2e3dab910a638.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/935b1e5a414a5e3701e35a609bb6aaaccda7f5c8.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/46cfa60c22dbdd2c0d0f0be44d533071229f72a0.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/200913f48052dc1b522f35eb4407c9b4b4751e26.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/826596f366fb2a38df993825d9c99be3f5166173.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/fb5074c6d95e8e7569cc2932e08628c9206e7974.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/52378c5db7b62a381423862d841da43fd39a5efb.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/0c6d9ab53eb056b8b5480e8c9409f4051d859101.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/8016550aeda4ee46c7a402898bee51dea8c5cc34.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/fb0672d196e99b1bac27c6f1f503f17cb1a9fbda.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/43d706998ede35518fbc1c2605909522b0e88894.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/19323ab3491dd449fb02c1c85012d8488131de27.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/07556991629c34414449df85adda8fbd1dde0a77.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/bfe2327fbce3bfe15a548cc7d3604d64f1100980.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/94c71f5367567bec995e82850ac832e8d8c4acb0.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/174532371b62aa9268b4c2fa522219a4b62962d2.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/2f5cc6a65929963d6511733a56ee2e16dd8646c5.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/2ae3c72a5e1d95fed640263c3b65449576850e48.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/370c3abb0655a325d360a6019813c241018a6d4d.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/141d8c55f827502299b332ab51d99968bdb31c55.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/04d845644e716e70f8b55ce84bc240c0dd161c1f.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/f16b09b3b55e21751585d5ec82cc611e2cb11ac1.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/d1220c0d41f57be45ca500069ddba4c4fcc330d6.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/b3e817f30e48e0831aaa482df8e2d7676af5704a.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/4e7686f3a10ecb73c4f6add77a6c28152bb6655c.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/98c6c0e869915c7a98d9b6da673e381feb082665.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/52a5f06887c3077ee8d7f4d229debdaf6b055d37.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/0a353a5e30e9caa46fed445c9c15adc94d42119e.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/2658965a5ced07cf1a5c6fefacfd9baeae855f7f.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/81bd35c12d2c6dac6928f0c48305a2c9163b051d.png">
<meta property="og:image" content="https://picturebed.yunyize.com:8000/pic/b6186e7052e311ee9ad2ab767987ad93136643fd/f89d129d26afb34851cea330e1bfcc242274bf8e.png">
<meta property="article:published_time" content="2023-09-14T00:10:36.000Z">
<meta property="article:modified_time" content="2024-01-05T09:25:47.995Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="样题">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/377d8a1e6a3b066832cb2547df61230dc6d6dfa0.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-2023金砖鄂吉湘黔样题" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/09/14/2023%E9%87%91%E7%A0%96%E9%84%82%E5%90%89%E6%B9%98%E9%BB%94%E6%A0%B7%E9%A2%98/" class="article-date">
  <time class="dt-published" datetime="2023-09-14T00:10:36.000Z" itemprop="datePublished">2023-09-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      2023金砖鄂吉湘黔样题
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="2023金砖职赛云计算赛项鄂吉湘黔省赛选拔赛"><a href="#2023金砖职赛云计算赛项鄂吉湘黔省赛选拔赛" class="headerlink" title="2023金砖职赛云计算赛项鄂吉湘黔省赛选拔赛"></a>2023金砖职赛云计算赛项鄂吉湘黔省赛选拔赛</h1><h2 id="A模块-OpenStack-平台部署与运维-30分"><a href="#A模块-OpenStack-平台部署与运维-30分" class="headerlink" title="A模块: OpenStack 平台部署与运维(30分)"></a>A模块: OpenStack 平台部署与运维(30分)</h2><h3 id="任务1-OpenStack私有云平台搭建-15分"><a href="#任务1-OpenStack私有云平台搭建-15分" class="headerlink" title="任务1 OpenStack私有云平台搭建(15分)"></a>任务1 OpenStack私有云平台搭建(15分)</h3><h4 id="1-基础环境配置-2分"><a href="#1-基础环境配置-2分" class="headerlink" title="1. 基础环境配置(2分)"></a>1. 基础环境配置(2分)</h4><p>把 <code>controller</code>节点主机名设置为 <code>controller</code> ,  <code>compute</code> 节点主机名设置为 <code>compute</code> , 修改 hosts 文件将 IP 地映射为主机名, root 密码修改为 000000.</p>
<p>在 <code>controller</code> 节点将 <code>cat /etc/hosts</code> 命令的返回结果提交到答题框.</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 改主机名</span><br><span class="line">hostnamectl set-hostname controller</span><br><span class="line"></span><br><span class="line"># 改密码</span><br><span class="line">passwd root &lt;&lt;EOF</span><br><span class="line">000000</span><br><span class="line">000000</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 添加 hosts 记录</span><br><span class="line">echo -e &quot;192.168.100.8 controller\n192.168.100.6 compute&quot; &gt;&gt; /etc/hosts</span><br><span class="line"></span><br><span class="line"># 复制到 compute 节点, 手动输入密码</span><br><span class="line">scp /etc/hosts compute:/etc/hosts</span><br><span class="line"># compute</span><br><span class="line"># 改主机名</span><br><span class="line">hostnamectl set-hostname compute</span><br><span class="line"></span><br><span class="line"># 改密码</span><br><span class="line">passwd root &lt;&lt;EOF</span><br><span class="line">000000</span><br><span class="line">000000</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/hosts</span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">192.168.100.8 controller</span><br><span class="line">192.168.100.6 compute</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="2-yum源配置-2分"><a href="#2-yum源配置-2分" class="headerlink" title="2. yum源配置(2分)"></a>2. yum源配置(2分)</h4><p>在 <code>controller</code> 节点安装 ftp 服务, 使用提供的 CentOS 镜像和 OpenStack 软件包配置 yum 源, 使用该 ftp 源作为 <code>compute</code> 节点安装 OpenStack 平台的网络源. 分别设置 <code>controller</code> 节点和 <code>compute</code> 节点的 yum 源文件为 local.repo , ftp.repo .</p>
<p>在 <code>compute</code> 节点将 <code>cat /etc/yum.repos.d/ftp.repo</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 删除原有的软件源</span><br><span class="line">rm -rf /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line"># 写入本地源</span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/local.repo</span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=file:///opt/centos/</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[iaas]</span><br><span class="line">name=iaas</span><br><span class="line">baseurl=file:///opt/iaas/openstack/</span><br><span class="line">gpgcheck=0</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 清除缓存并安装相关软件</span><br><span class="line">yum clean all</span><br><span class="line">yum install vsftpd -y</span><br><span class="line"></span><br><span class="line"># 将 /opt 目录公开</span><br><span class="line">echo anon_root=/opt &gt;&gt; /etc/vsftpd/vsftpd.conf</span><br><span class="line"></span><br><span class="line"># 关闭防火墙和 SELinux</span><br><span class="line">systemctl disable --now firewalld</span><br><span class="line">setenforce 0</span><br><span class="line"></span><br><span class="line"># 启动 vsftpd</span><br><span class="line">systemctl enable --now vsftpd</span><br><span class="line"># compute</span><br><span class="line"># 删除原有的软件源</span><br><span class="line">rm -rf /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line"># 写入本地源</span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/ftp.repo</span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=ftp://controller/centos/</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[iaas]</span><br><span class="line">name=iaas</span><br><span class="line">baseurl=ftp://controller/iaas/openstack/</span><br><span class="line">gpgcheck=0</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 关闭防火墙和 SELinux</span><br><span class="line">systemctl disable --now firewalld</span><br><span class="line">setenforce 0</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# cat /etc/yum.repos.d/ftp.repo</span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=ftp://controller/centos/</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[iaas]</span><br><span class="line">name=iaas</span><br><span class="line">baseurl=ftp://controller/iaas/openstack/</span><br><span class="line">gpgcheck=0</span><br><span class="line">[root@compute ~]# </span><br></pre></td></tr></table></figure>

<h4 id="3-配置无秘钥ssh-1分"><a href="#3-配置无秘钥ssh-1分" class="headerlink" title="3. 配置无秘钥ssh(1分)"></a>3. 配置无秘钥ssh(1分)</h4><p>配置 <code>controller</code> 节点可以无秘钥访问 <code>compute</code> 节点, 配置完成后, 尝试 ssh 连接 <code>compute</code> 节点的 hostname 进行测试.</p>
<p>在 <code>controller</code> 节点将 <code>cat .ssh/known_hosts &amp;&amp; ssh compute</code> 命令的返回结果提交到答题框</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 生成ssh密钥对</span><br><span class="line">ssh-keygen</span><br><span class="line"></span><br><span class="line"># 将公钥拷贝至 compute 节点, 手动输入密码</span><br><span class="line">ssh-copy-id root@compute</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat .ssh/known_hosts &amp;&amp; ssh compute</span><br><span class="line">compute,192.168.100.6 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBBPqPoiQSVXQRVMkqSBILvgfvla5JujuTRmHArATcCXtUWWc3HGWV8/IolNxb668LezO17sjXo9/JKDBnUg8W6k=</span><br><span class="line">Last login: Fri Aug 25 19:33:26 2023 from 10.5.0.1</span><br><span class="line">[root@compute ~]#</span><br></pre></td></tr></table></figure>

<h4 id="4-基础安装-1分"><a href="#4-基础安装-1分" class="headerlink" title="4. 基础安装(1分)"></a>4. 基础安装(1分)</h4><p>在控制节点和计算节点上分别安装 <code>openstack-shell</code> 软件包, 根据表2配置两个节点脚本文件中的基本变量(配置脚本文件为 <code>/root/variable.sh</code> ),  配置完成后 <code>controller</code> 节点和 <code>compute</code> 节点分别执行 <code>openstack-completion.sh</code> 部署平台客户端. </p>
<p>在 <code>controller</code> 节点将 <code>cat /root/variable.sh | grep -Ev &#39;^$|#&#39;</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 在 controller 上安装 openstack-shell</span><br><span class="line">yum install -y openstack-shell</span><br><span class="line"></span><br><span class="line"># 在 compute 上安装 openstack-shell</span><br><span class="line">ssh root@compute yum install -y openstack-shell</span><br><span class="line"></span><br><span class="line"># 编辑 /root/variable.sh, 我这里直接覆盖了, 这里每个人自行根据题目所给出的表格和自身参数修改</span><br><span class="line">cat &lt;&lt;EOF &gt; /root/variable.sh </span><br><span class="line">HOST_IP=192.168.100.8</span><br><span class="line">HOST_PASS=000000</span><br><span class="line">HOST_NAME=controller</span><br><span class="line">HOST_IP_NODE=192.168.100.6</span><br><span class="line">HOST_PASS_NODE=000000</span><br><span class="line">HOST_NAME_NODE=compute</span><br><span class="line">network_segment_IP=192.168.100.0/24</span><br><span class="line">RABBIT_USER=openstack</span><br><span class="line">RABBIT_PASS=000000</span><br><span class="line">DB_PASS=000000</span><br><span class="line">DOMAIN_NAME=demo</span><br><span class="line">ADMIN_PASS=000000</span><br><span class="line">DEMO_PASS=000000</span><br><span class="line">KEYSTONE_DBPASS=000000</span><br><span class="line">GLANCE_DBPASS=000000</span><br><span class="line">GLANCE_PASS=000000</span><br><span class="line">NOVA_DBPASS=000000</span><br><span class="line">NOVA_PASS=000000</span><br><span class="line">NEUTRON_DBPASS=000000</span><br><span class="line">NEUTRON_PASS=000000</span><br><span class="line">METADATA_SECRET=000000</span><br><span class="line">INTERFACE_IP_HOST=192.168.100.8</span><br><span class="line">INTERFACE_IP_NODE=192.168.100.6</span><br><span class="line">INTERFACE_NAME_HOST=eth1</span><br><span class="line">INTERFACE_NAME_NODE=eth1</span><br><span class="line">Physical_NAME=provider</span><br><span class="line">minvlan=100</span><br><span class="line">maxvlan=200</span><br><span class="line">CINDER_DBPASS=000000</span><br><span class="line">CINDER_PASS=000000</span><br><span class="line">BLOCK_DISK=vdb1</span><br><span class="line">SWIFT_PASS=000000</span><br><span class="line">OBJECT_DISK=vdb2</span><br><span class="line">STORAGE_LOCAL_NET_IP=192.168.100.6</span><br><span class="line">HEAT_DBPASS=000000</span><br><span class="line">HEAT_PASS=000000</span><br><span class="line">CEILOMETER_DBPASS=000000</span><br><span class="line">CEILOMETER_PASS=000000</span><br><span class="line">MANILA_DBPASS=000000</span><br><span class="line">MANILA_PASS=000000</span><br><span class="line">SHARE_DISK=vdb3</span><br><span class="line">CLOUDKITTY_DBPASS=000000</span><br><span class="line">CLOUDKITTY_PASS=000000</span><br><span class="line">BARBICAN_DBPASS=000000</span><br><span class="line">BARBICAN_PASS=000000</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 复制环境变量文件到 compute 节点</span><br><span class="line">scp /root/variable.sh root@compute:/root/variable.sh</span><br><span class="line"></span><br><span class="line"># 开始刷第一个脚本</span><br><span class="line">openstack-completion.sh</span><br><span class="line"># compute</span><br><span class="line"># 硬盘分区, 我这里是vdb(30G)硬盘</span><br><span class="line"># 分四个区: vdb1 5G, vdb2 10G, vdb3 10G, vdb4 5G</span><br><span class="line">[root@compute ~]# fdisk /dev/vdb</span><br><span class="line">Welcome to fdisk(util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">Building a new DOS disklabel with disk identifier 0x41bef6a7.</span><br><span class="line"></span><br><span class="line">Command(m for help): g</span><br><span class="line">Building a new GPT disklabel(GUID: 99016795-1A47-4A51-AE7A-D76B8933CD10)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command(m for help): n</span><br><span class="line">Partition number(1-128, default 1): </span><br><span class="line">First sector(2048-62914526, default 2048): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125;(2048-62914526, default 62914526): +5G</span><br><span class="line">Created partition 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command(m for help): n</span><br><span class="line">Partition number(2-128, default 2): </span><br><span class="line">First sector(10487808-62914526, default 10487808): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125;(10487808-62914526, default 62914526): +10G</span><br><span class="line">Created partition 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command(m for help): n</span><br><span class="line">Partition number(3-128, default 3): </span><br><span class="line">First sector(31459328-62914526, default 31459328): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125;(31459328-62914526, default 62914526): +10G</span><br><span class="line">Created partition 3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command(m for help): n</span><br><span class="line">Partition number(4-128, default 4): </span><br><span class="line">First sector(52430848-62914526, default 52430848): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125;(52430848-62914526, default 62914526): </span><br><span class="line">Created partition 4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command(m for help): w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">Syncing disks.</span><br><span class="line">[root@compute ~]# </span><br><span class="line"></span><br><span class="line"># 开始刷第一个脚本</span><br><span class="line">openstack-completion.sh</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /root/variable.sh | grep -Ev &#x27;(^$|#)&#x27;</span><br><span class="line">HOST_IP=192.168.100.8</span><br><span class="line">HOST_PASS=000000</span><br><span class="line">HOST_NAME=controller</span><br><span class="line">HOST_IP_NODE=192.168.100.6</span><br><span class="line">HOST_PASS_NODE=000000</span><br><span class="line">HOST_NAME_NODE=compute</span><br><span class="line">network_segment_IP=192.168.100.0/24</span><br><span class="line">RABBIT_USER=openstack</span><br><span class="line">RABBIT_PASS=000000</span><br><span class="line">DB_PASS=000000</span><br><span class="line">DOMAIN_NAME=demo</span><br><span class="line">ADMIN_PASS=000000</span><br><span class="line">DEMO_PASS=000000</span><br><span class="line">KEYSTONE_DBPASS=000000</span><br><span class="line">GLANCE_DBPASS=000000</span><br><span class="line">GLANCE_PASS=000000</span><br><span class="line">NOVA_DBPASS=000000</span><br><span class="line">NOVA_PASS=000000</span><br><span class="line">NEUTRON_DBPASS=000000</span><br><span class="line">NEUTRON_PASS=000000</span><br><span class="line">METADATA_SECRET=000000</span><br><span class="line">INTERFACE_IP_HOST=192.168.100.8</span><br><span class="line">INTERFACE_IP_NODE=192.168.100.6</span><br><span class="line">INTERFACE_NAME_HOST=eth1</span><br><span class="line">INTERFACE_NAME_NODE=eth1</span><br><span class="line">Physical_NAME=provider</span><br><span class="line">minvlan=100</span><br><span class="line">maxvlan=200</span><br><span class="line">CINDER_DBPASS=000000</span><br><span class="line">CINDER_PASS=000000</span><br><span class="line">BLOCK_DISK=vdb1</span><br><span class="line">SWIFT_PASS=000000</span><br><span class="line">OBJECT_DISK=vdb2</span><br><span class="line">STORAGE_LOCAL_NET_IP=192.168.100.6</span><br><span class="line">HEAT_DBPASS=000000</span><br><span class="line">HEAT_PASS=000000</span><br><span class="line">CEILOMETER_DBPASS=000000</span><br><span class="line">CEILOMETER_PASS=000000</span><br><span class="line">MANILA_DBPASS=000000</span><br><span class="line">MANILA_PASS=000000</span><br><span class="line">SHARE_DISK=vdb3</span><br><span class="line">CLOUDKITTY_DBPASS=000000</span><br><span class="line">CLOUDKITTY_PASS=000000</span><br><span class="line">BARBICAN_DBPASS=000000</span><br><span class="line">BARBICAN_PASS=000000</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="5-数据库安装与调优-1分"><a href="#5-数据库安装与调优-1分" class="headerlink" title="5. 数据库安装与调优(1分)"></a>5. 数据库安装与调优(1分)</h4><p>在 <code>controller</code> 节点上使用 <code>openstack-controller-mysql.sh</code> 脚本安装 MariaDB Memcached RabbitMQ 等服务. 安装服务完毕后, 修改 &#x2F;etc&#x2F;my.cnf 文件, 完成下列要求:</p>
<p>1.设置数据库支持大小写; 2.设置数据库缓存 innodb 表的索引, 数据, 插入数据时的缓冲为 4G; 3.设置数据库的 log buffer 为 64 MB; 4.设置数据库的 redo log 大小为 256 MB; 5.设置数据库的 redo log 文件组为 2. </p>
<p>在 <code>controller</code> 节点将 <code>cat /etc/my.cnf | grep -Ev ^&#39;(#|$)&#39;</code> 命令的返回结果提交到答题框</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line">cat &lt;&lt; EOF &gt;&gt; /etc/my.cnf</span><br><span class="line">#lower_case_table_names = 1</span><br><span class="line">#innodb_buffer_pool_size = 4G</span><br><span class="line">innodb_log_buffer_size = 64M</span><br><span class="line">innodb_log_file_size = 256M</span><br><span class="line">innodb_log_files_in_group = 2</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 重启服务生效</span><br><span class="line">systemctl restart mariadb</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/my.cnf | grep -Ev ^&#x27;(#|$)&#x27;</span><br><span class="line">[client-server]</span><br><span class="line">[mysqld]</span><br><span class="line">symbolic-links=0</span><br><span class="line">!includedir /etc/my.cnf.d</span><br><span class="line">default-storage-engine = innodb</span><br><span class="line">innodb_file_per_table</span><br><span class="line">collation-server = utf8_general_ci</span><br><span class="line">init-connect = &#x27;SET NAMES utf8&#x27;</span><br><span class="line">character-set-server = utf8</span><br><span class="line">max_connections = 10000</span><br><span class="line">lower_case_table_names = 1</span><br><span class="line">innodb_buffer_pool_size = 4G</span><br><span class="line">innodb_log_buffer_size = 64M</span><br><span class="line">innodb_log_file_size = 256M</span><br><span class="line">innodb_log_files_in_group = 2</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="6-Keystone服务安装与使用-1分"><a href="#6-Keystone服务安装与使用-1分" class="headerlink" title="6. Keystone服务安装与使用(1分)"></a>6. Keystone服务安装与使用(1分)</h4><p>在 <code>controller</code> 节点上使用 <code>openstack-controller-keystone.sh</code> 脚本安装 Keystone 服务安装完成后, 使用相关命令, 创建用户  <code>competition</code> , 密码为000000.</p>
<p>在 <code>controller</code> 节点将 <code>source /root/admin-openrc &amp;&amp; openstack service list &amp;&amp; openstack user list</code> 命今的返回结果提交到答题框.</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line">source /root/admin-openrc</span><br><span class="line">openstack user create --password 000000 competition</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# source /root/admin-openrc &amp;&amp; openstack service list &amp;&amp; openstack user list</span><br><span class="line">+----------------------------------+----------+----------+</span><br><span class="line">| ID                               | Name     | Type     |</span><br><span class="line">+----------------------------------+----------+----------+</span><br><span class="line">| fbebbdd1be4744c9b2bee1f9d8a8e1b1 | keystone | identity |</span><br><span class="line">+----------------------------------+----------+----------+</span><br><span class="line">+----------------------------------+-------------+</span><br><span class="line">| ID                               | Name        |</span><br><span class="line">+----------------------------------+-------------+</span><br><span class="line">| 7b4fd6620502495897dd3178605532f4 | admin       |</span><br><span class="line">| fe34d884922f4ce1a994d419690b3d27 | demo        |</span><br><span class="line">| 11bc91c806f74e94b8523c7aaf0be171 | competition |</span><br><span class="line">+----------------------------------+-------------+</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="7-Glance安装与使用-1分"><a href="#7-Glance安装与使用-1分" class="headerlink" title="7. Glance安装与使用(1分)"></a>7. Glance安装与使用(1分)</h4><p>在 <code>controller</code> 节点上使用 <code>openstack-controller-glance.sh</code> 脚本安装 Glance 服务. 使用命将提供的cirros-0.3.4-x86 64-disk.img镜像(该镜像在HTTP服务中, 可自行下载)上传至平台, 命名为cirros, 并设置最小启动需要的硬盘为10G, 最小启动需要的内存为1G. </p>
<p>在 <code>controller</code> 节点将 <code>source /root/admin-openrc &amp;&amp; openstack-service status | grep glance &amp;&amp; openstack image show cirros</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line">source /root/admin-openrc</span><br><span class="line">openstack image create \</span><br><span class="line">  --disk-format qcow2 \</span><br><span class="line">  --min-disk 10 \</span><br><span class="line">  --min-ram 1024 \</span><br><span class="line">  --file /root/cirros-0.3.4-x86_64-disk.img \</span><br><span class="line">  cirros</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# source /root/admin-openrc &amp;&amp; openstack-service status | grep glance &amp;&amp; openstack image show cirros</span><br><span class="line">MainPID=17551 Id=openstack-glance-api.service ActiveState=active</span><br><span class="line">MainPID=17554 Id=openstack-glance-registry.service ActiveState=active</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field            | Value                                                                                                                                                                                      |</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| checksum         | ee1eca47dc88f4879d8a229cc70a07c6                                                                                                                                                           |</span><br><span class="line">| container_format | bare                                                                                                                                                                                       |</span><br><span class="line">| created_at       | 2023-08-25T12:31:19Z                                                                                                                                                                       |</span><br><span class="line">| disk_format      | qcow2                                                                                                                                                                                      |</span><br><span class="line">| file             | /v2/images/09cd1deb-662c-4ae0-9dc3-f4b672c80d78/file                                                                                                                                       |</span><br><span class="line">| id               | 09cd1deb-662c-4ae0-9dc3-f4b672c80d78                                                                                                                                                       |</span><br><span class="line">| min_disk         | 10                                                                                                                                                                                         |</span><br><span class="line">| min_ram          | 1024                                                                                                                                                                                       |</span><br><span class="line">| name             | cirros                                                                                                                                                                                     |</span><br><span class="line">| owner            | b7381cceab734f118f203d70838e343b                                                                                                                                                           |</span><br><span class="line">| properties       | os_hash_algo=&#x27;sha512&#x27;, os_hash_value=&#x27;1b03ca1bc3fafe448b90583c12f367949f8b0e665685979d95b004e48574b953316799e23240f4f739d1b5eb4c4ca24d38fdc6f4f9d8247a2bc64db25d6bbdb2&#x27;, os_hidden=&#x27;False&#x27; |</span><br><span class="line">| protected        | False                                                                                                                                                                                      |</span><br><span class="line">| schema           | /v2/schemas/image                                                                                                                                                                          |</span><br><span class="line">| size             | 13287936                                                                                                                                                                                   |</span><br><span class="line">| status           | active                                                                                                                                                                                     |</span><br><span class="line">| tags             |                                                                                                                                                                                            |</span><br><span class="line">| updated_at       | 2023-08-25T12:31:19Z                                                                                                                                                                       |</span><br><span class="line">| virtual_size     | None                                                                                                                                                                                       |</span><br><span class="line">| visibility       | shared                                                                                                                                                                                     |</span><br><span class="line">+------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="8-Nova安装-1分"><a href="#8-Nova安装-1分" class="headerlink" title="8. Nova安装(1分)"></a>8. Nova安装(1分)</h4><p>在 <code>controller</code> 节点和 <code>compute</code> 节点上分别使用 <code>openstack-controller-nova.sh</code> 脚本 <code>openstack-compute-nova.sh</code> 脚本安装Nova服务安装完成后, 请修改nova相关配置文件, 解决因等待时间过长而导致虚拟机启动超时从而获取不到IP地址而报错失败的问题. </p>
<p>在 <code>controller</code> 节点将 <code>cat /etc/nova/nova.conf | grep -Ev ^&#39;(#|$)&#39;</code> 命令的返回结果提交到答题框</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 刷脚本</span><br><span class="line">openstack-controller-nova.sh</span><br><span class="line"># 修改配置, 解决等待时间过长而导致虚拟机启动超时从而获取不到IP地址而报错失败的问题</span><br><span class="line">crudini --set /etc/nova/nova.conf DEFAULT vif_plugging_is_fatal false</span><br><span class="line"># 重启nova</span><br><span class="line">openstack-service restart nova</span><br><span class="line"># compute</span><br><span class="line"># 刷脚本</span><br><span class="line">openstack-compute-nova.sh</span><br><span class="line"># 修改配置, 解决等待时间过长而导致虚拟机启动超时从而获取不到IP地址而报错失败的问题</span><br><span class="line">crudini --set /etc/nova/nova.conf DEFAULT vif_plugging_is_fatal false</span><br><span class="line"># 重启nova</span><br><span class="line">openstack-service restart nova</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/nova/nova.conf | grep -Ev ^&#x27;(#|$)&#x27;</span><br><span class="line">[DEFAULT]</span><br><span class="line">enabled_apis = osapi_compute,metadata</span><br><span class="line">transport_url = rabbit://openstack:000000@controller</span><br><span class="line">my_ip = 192.168.100.8</span><br><span class="line">use_neutron = True</span><br><span class="line">firewall_driver = nova.virt.firewall.NoopFirewallDriver</span><br><span class="line">vif_plugging_is_fatal = false</span><br><span class="line">[api]</span><br><span class="line">auth_strategy = keystone</span><br><span class="line">[api_database]</span><br><span class="line">connection = mysql+pymysql://nova:000000@controller/nova_api</span><br><span class="line">[barbican]</span><br><span class="line">[cache]</span><br><span class="line">[cinder]</span><br><span class="line">[compute]</span><br><span class="line">[conductor]</span><br><span class="line">[console]</span><br><span class="line">[consoleauth]</span><br><span class="line">[cors]</span><br><span class="line">[database]</span><br><span class="line">connection = mysql+pymysql://nova:000000@controller/nova</span><br><span class="line">[devices]</span><br><span class="line">[ephemeral_storage_encryption]</span><br><span class="line">[filter_scheduler]</span><br><span class="line">[glance]</span><br><span class="line">api_servers = http://controller:9292</span><br><span class="line">[guestfs]</span><br><span class="line">[healthcheck]</span><br><span class="line">[hyperv]</span><br><span class="line">[ironic]</span><br><span class="line">[key_manager]</span><br><span class="line">[keystone]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">www_authenticate_uri = http://controller:5000</span><br><span class="line">auth_url = http://controller:5000</span><br><span class="line">memcached_servers = controller:11211</span><br><span class="line">auth_type = password</span><br><span class="line">project_domain_name = demo</span><br><span class="line">user_domain_name = demo</span><br><span class="line">project_name = service</span><br><span class="line">username = nova</span><br><span class="line">password = 000000</span><br><span class="line">[libvirt]</span><br><span class="line">[metrics]</span><br><span class="line">[mks]</span><br><span class="line">[neutron]</span><br><span class="line">[notifications]</span><br><span class="line">[osapi_v21]</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">lock_path = /var/lib/nova/tmp</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_kafka]</span><br><span class="line">[oslo_messaging_notifications]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">[oslo_middleware]</span><br><span class="line">[oslo_policy]</span><br><span class="line">[pci]</span><br><span class="line">[placement]</span><br><span class="line">region_name = RegionOne</span><br><span class="line">project_domain_name = demo</span><br><span class="line">project_name = service</span><br><span class="line">auth_type = password</span><br><span class="line">user_domain_name = demo</span><br><span class="line">auth_url = http://controller:5000/v3</span><br><span class="line">username = placement</span><br><span class="line">password = 000000</span><br><span class="line">[powervm]</span><br><span class="line">[privsep]</span><br><span class="line">[profiler]</span><br><span class="line">[quota]</span><br><span class="line">[rdp]</span><br><span class="line">[remote_debug]</span><br><span class="line">[scheduler]</span><br><span class="line">discover_hosts_in_cells_interval = 300</span><br><span class="line">[serial_console]</span><br><span class="line">[service_user]</span><br><span class="line">[spice]</span><br><span class="line">[upgrade_levels]</span><br><span class="line">[vault]</span><br><span class="line">[vendordata_dynamic_auth]</span><br><span class="line">[vmware]</span><br><span class="line">[vnc]</span><br><span class="line">enabled = true</span><br><span class="line">server_listen = 192.168.100.8</span><br><span class="line">server_proxyclient_address = 192.168.100.8</span><br><span class="line">[workarounds]</span><br><span class="line">[wsgi]</span><br><span class="line">[xenserver]</span><br><span class="line">[xvp]</span><br><span class="line">[zvm]</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="9-Neutron安装-1分"><a href="#9-Neutron安装-1分" class="headerlink" title="9. Neutron安装(1分)"></a>9. Neutron安装(1分)</h4><p>使用提供的脚本 <code>openstack-controller-neutron.sh</code> 和 <code>openstack-compute-neutron.sh</code> , 在 <code>controller</code> 和 <code>compute</code> 节点上安装neutron服务</p>
<p>在 <code>controller</code> 节点将 <code>source /root/admin-openrc &amp;&amp; openstack-service status | grep neutron &amp;&amp; openstack network agent list</code> 命的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 刷脚本</span><br><span class="line">openstack-controller-neutron.sh</span><br><span class="line"></span><br><span class="line"># 给 compute 节点刷脚本</span><br><span class="line">ssh root@compute openstack-compute-neutron.sh</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# source /root/admin-openrc &amp;&amp; openstack-service status | grep neutron &amp;&amp; openstack network agent list</span><br><span class="line">MainPID=21267 Id=neutron-dhcp-agent.service ActiveState=active</span><br><span class="line">MainPID=21270 Id=neutron-l3-agent.service ActiveState=active</span><br><span class="line">MainPID=21275 Id=neutron-linuxbridge-agent.service ActiveState=active</span><br><span class="line">MainPID=21268 Id=neutron-metadata-agent.service ActiveState=active</span><br><span class="line">MainPID=21265 Id=neutron-server.service ActiveState=active</span><br><span class="line">+--------------------------------------+--------------------+------------+-------------------+-------+-------+---------------------------+</span><br><span class="line">| ID                                   | Agent Type         | Host       | Availability Zone | Alive | State | Binary                    |</span><br><span class="line">+--------------------------------------+--------------------+------------+-------------------+-------+-------+---------------------------+</span><br><span class="line">| 41c6bf6a-c027-4b69-9024-0d8a71567310 | Linux bridge agent | controller | None              | :-)   | UP    | neutron-linuxbridge-agent |</span><br><span class="line">| 49c4856e-51a2-4235-a5cc-515aa248ae1f | DHCP agent         | controller | nova              | :-)   | UP    | neutron-dhcp-agent        |</span><br><span class="line">| 69e796cf-43fd-4341-8063-2f7063d5957b | Metadata agent     | controller | None              | :-)   | UP    | neutron-metadata-agent    |</span><br><span class="line">| 8f086811-3d4b-48c5-aae0-4e9b413cb465 | L3 agent           | controller | nova              | :-)   | UP    | neutron-l3-agent          |</span><br><span class="line">| b9e03b3f-9525-4f4d-ae40-d1d884b7c6ae | Linux bridge agent | compute    | None              | :-)   | UP    | neutron-linuxbridge-agent |</span><br><span class="line">+--------------------------------------+--------------------+------------+-------------------+-------+-------+---------------------------+</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="10-Dashboard安装-1分"><a href="#10-Dashboard安装-1分" class="headerlink" title="10. Dashboard安装(1分)"></a>10. Dashboard安装(1分)</h4><p>在 <code>controller</code> 节点上使用 <code>openstack-controller-dashboard.sh</code> 脚本安装dashboard服务. 安装完成后, 将Dashboard中的Django数据修改为存储在文件中. </p>
<p>在 <code>controller</code> 节点将 <code>cat /etc/openstack-dashboard/local_settings | grep -Ev ^&#39;(#|$)&#39; | grep django</code> 命令的返回结果提交到答题框.</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 刷脚本</span><br><span class="line">openstack-controller-dashboard.sh</span><br><span class="line"></span><br><span class="line"># 修改配置文件, 以将数据存于文件</span><br><span class="line">sed -i &#x27;s/django.contrib.sessions.backends.cache/django.contrib.sessions.backends.file/g&#x27; /etc/openstack-dashboard/local_settings</span><br><span class="line"></span><br><span class="line"># 重启服务生效</span><br><span class="line">systemctl restart apache memcached</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/openstack-dashboard/local_settings | grep -Ev ^&#x27;(#|$)&#x27; | grep django</span><br><span class="line">from django.utils.translation import ugettext_lazy as _</span><br><span class="line">EMAIL_BACKEND = &#x27;django.core.mail.backends.console.EmailBackend&#x27;</span><br><span class="line">    # django.db.backends will still log unless it is disabled explicitly.</span><br><span class="line">        &#x27;django&#x27;: &#123;</span><br><span class="line">        # Logging from django.db.backends is VERY verbose, send to null</span><br><span class="line">        &#x27;django.db.backends&#x27;: &#123;</span><br><span class="line">SESSION_ENGINE = &#x27;django.contrib.sessions.backends.file&#x27;</span><br><span class="line">         &#x27;BACKEND&#x27;: &#x27;django.core.cache.backends.memcached.MemcachedCache&#x27;,</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="11-Swift安装-1分"><a href="#11-Swift安装-1分" class="headerlink" title="11. Swift安装(1分)"></a>11. Swift安装(1分)</h4><p>在控制节点和计算节点上分别使用 <code>openstack-controller-swift.sh</code> 和 <code>openstack-compute-swift.sh</code> 脚本安装Swift服务, 安装完成后, 使用命令创建一个名叫 <code>examcontainer</code> 的容器, 将 cirros-0.3.4-x86 64-disk.img 镜像上传到 <code>examcontainer</code> 容器中, 并设置分段存放, 每-段大小为10M. </p>
<p>在 <code>controller</code> 节点将 <code>source /root/admin-openrc &amp;&amp; openstack-service status | grep swift &amp;&amp; swift list examcontainer_segments</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 刷脚本</span><br><span class="line">openstack-controller-swift.sh</span><br><span class="line"></span><br><span class="line"># compute节点</span><br><span class="line">ssh root@compute openstack-compute-swift.sh</span><br><span class="line"></span><br><span class="line"># 创建容器 and 上传文件</span><br><span class="line">openstack container create examcontainer</span><br><span class="line">swift upload --segment-size 10M examcontainer cirros-0.3.4-x86_64-disk.img </span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# source /root/admin-openrc &amp;&amp; openstack-service status | grep swift &amp;&amp; swift list examcontainer_segments</span><br><span class="line">MainPID=22935 Id=openstack-swift-proxy.service ActiveState=active</span><br><span class="line">cirros-0.3.4-x86_64-disk.img/1692960357.623000/13287936/10485760/00000000</span><br><span class="line">cirros-0.3.4-x86_64-disk.img/1692960357.623000/13287936/10485760/00000001</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="12-Cinder创建硬盘-1分"><a href="#12-Cinder创建硬盘-1分" class="headerlink" title="12. Cinder创建硬盘(1分)"></a>12. Cinder创建硬盘(1分)</h4><p>在控制节点和计算节点分别使用 <code>openstack-controller-cinder.sh</code>  <code>openstack-compute-cinder.sh</code> 脚本安装Cinder服务, 请在计算节点对块存储进行扩容操作, 即在计算节点再分出一个5G的分区, 加入到cinder块存储的后端存储中去. </p>
<p>在 <code>compute</code> 节点将 <code>openstack-service status | grep cinder &amp;&amp; vgdisplay</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># compute</span><br><span class="line"># 给 controller 刷脚本</span><br><span class="line">ssh root@controller openstack-controller-cinder.sh</span><br><span class="line"></span><br><span class="line"># compute 刷脚本</span><br><span class="line">openstack-compute-cinder.sh</span><br><span class="line"></span><br><span class="line"># 扩容操作, 这里用到我们之前分的vdb4(5G)的这个分区来给vdb1(5G)的vg来扩容</span><br><span class="line">pvcreate /dev/vdb4</span><br><span class="line">vgextend cinder-volumes /dev/vdb4</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# openstack-service status | grep cinder &amp;&amp; vgdisplay</span><br><span class="line">MainPID=14923 Id=openstack-cinder-volume.service ActiveState=active</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               cinder-volumes</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        2</span><br><span class="line">  Metadata Sequence No  5</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                1</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                2</span><br><span class="line">  Act PV                2</span><br><span class="line">  VG Size               9.99 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              2558</span><br><span class="line">  Alloc PE / Size       1220 / &lt;4.77 GiB</span><br><span class="line">  Free  PE / Size       1338 / &lt;5.23 GiB</span><br><span class="line">  VG UUID               4gQ1WR-bKxB-ktVU-GX3l-NcRa-UXgL-kdQfum</span><br><span class="line">   </span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               centos</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        1</span><br><span class="line">  Metadata Sequence No  3</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                2</span><br><span class="line">  Open LV               2</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                1</span><br><span class="line">  Act PV                1</span><br><span class="line">  VG Size               &lt;19.00 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              4863</span><br><span class="line">  Alloc PE / Size       4863 / &lt;19.00 GiB</span><br><span class="line">  Free  PE / Size       0 / 0   </span><br><span class="line">  VG UUID               szhfxG-wnuY-3Lf2-Okue-3Lyq-wb2x-kjHrff</span><br><span class="line">   </span><br><span class="line">[root@compute ~]# </span><br></pre></td></tr></table></figure>

<h4 id="13-Cloudkitty服务安装与使用-1分"><a href="#13-Cloudkitty服务安装与使用-1分" class="headerlink" title="13. Cloudkitty服务安装与使用(1分)"></a>13. Cloudkitty服务安装与使用(1分)</h4><p>使用 <code>openstack-controller-cloudkitty.sh</code> 脚本安装 cloudkitty 服务, 安装完毕后, 启用 hashmap 评级模块, 接着创建 volume_thresholds 组, 创建服务匹配规则 volume.size, 并设置每GB的价格为0.01, 接下来对应大量数据设置应用折扣, 在组 volume thresholds 中创建调直, 设置若超过 50GB 的闻值, 应用 2% 的折扣(0.98). </p>
<p>在 <code>controller</code> 节点将<code>source /root/admin-openrc &amp;&amp; cloudkitty hashmap threshold list -s $(cloudkitty hashmap service list  | grep volume | awk -F &#39;|&#39; &#39;&#123;print $3&#125;&#39;)</code> 命令的返回结果提交到答题框</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 刷脚本</span><br><span class="line">openstack-controller-cloudkitty.sh</span><br><span class="line"></span><br><span class="line"># 启用hashmap评级 </span><br><span class="line">source /root/admin-openrc</span><br><span class="line">openstack rating module enable hashmap</span><br><span class="line"></span><br><span class="line"># 创建service</span><br><span class="line">openstack rating hashmap service create volume.size</span><br><span class="line"></span><br><span class="line"># 创建 group</span><br><span class="line">openstack rating hashmap group create volume_thresholds</span><br><span class="line"></span><br><span class="line"># 创建规则, 注意这里的-s和-g所对应的id请填写自己在创建service和group的id</span><br><span class="line">openstack rating hashmap mapping create \</span><br><span class="line">  -s SERVICE_ID \</span><br><span class="line">  -g GROUP_ID \</span><br><span class="line">  -t flat 0.01</span><br><span class="line">openstack rating hashmap threshold create \</span><br><span class="line">  -s SERVICE_ID \</span><br><span class="line">  -g GROUP_ID \</span><br><span class="line">  -t rate 50 0.98</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# source /root/admin-openrc &amp;&amp; cloudkitty hashmap threshold list -s $(cloudkitty hashmap service list  | grep volume | awk -F &#x27;|&#x27; &#x27;&#123;print $3&#125;&#x27;)</span><br><span class="line">+--------------------------------------+-------------+------------+------+----------+--------------------------------------+--------------------------------------+------------+</span><br><span class="line">| Threshold ID                         | Level       | Cost       | Type | Field ID | Service ID                           | Group ID                             | Project ID |</span><br><span class="line">+--------------------------------------+-------------+------------+------+----------+--------------------------------------+--------------------------------------+------------+</span><br><span class="line">| 0fad10ee-2f7c-4b3b-a6a3-819542b59186 | 50.00000000 | 0.98000000 | rate | None     | 6e3f0031-5ed4-4bc7-83d7-0f26ea4f7db9 | 8746426e-781f-4512-b3fa-d5f981762928 | None       |</span><br><span class="line">+--------------------------------------+-------------+------------+------+----------+--------------------------------------+--------------------------------------+------------+</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h2 id="任务2-OpenStack私有云服务运维-15分"><a href="#任务2-OpenStack私有云服务运维-15分" class="headerlink" title="任务2 OpenStack私有云服务运维(15分)"></a>任务2 OpenStack私有云服务运维(15分)</h2><h4 id="1-OpenStack平台内存优化-1分"><a href="#1-OpenStack平台内存优化-1分" class="headerlink" title="1. OpenStack平台内存优化(1分)"></a>1. OpenStack平台内存优化(1分)</h4><p>搭建完OpenStack平台后, 关闭系统的内存共享, 打开透明大页. </p>
<p>在 <code>controller</code> 节点将 <code>cat /sys/kernel/mm/transparent_hugepage/defrag</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line">echo never &gt; /sys/kernel/mm/transparent_hugepage/defrag</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /sys/kernel/mm/transparent_hugepage/defrag</span><br><span class="line">always madvise [never]</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="2-修改文件句柄数-1分"><a href="#2-修改文件句柄数-1分" class="headerlink" title="2. 修改文件句柄数(1分)"></a>2. 修改文件句柄数(1分)</h4><p>Linux服务器大并发时, 往往需要预先调优Linux参数. 默认情况下, Linux最大文件句柄数为1024个. 当你的服务器在大并发达到极限时, 就会报出“too many open files”. 创建一台云主机, 修改相关配置, 将控制节点的最大文件句柄数永久修改为65535. </p>
<p>在 <code>controller</code> 节点将 <code>ulimit -n &amp;&amp; cat /etc/security/limits.conf | grep -Ev ^&#39;(#|$)&#39;</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 临时修改</span><br><span class="line">ulimit -n 65535</span><br><span class="line"></span><br><span class="line"># 永久修改</span><br><span class="line">cat &lt;&lt; EOF &gt;&gt; /etc/security/limits.conf</span><br><span class="line">* soft nofile 65535</span><br><span class="line">* hard nofile 65535</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# ulimit -n &amp;&amp; cat /etc/security/limits.conf | grep -Ev ^&#x27;(#|$)&#x27;</span><br><span class="line">65535</span><br><span class="line">* soft nofile 65535</span><br><span class="line">* hard nofile 65535</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="3-Linux系统调优-防止SYN攻击-1分"><a href="#3-Linux系统调优-防止SYN攻击-1分" class="headerlink" title="3. Linux系统调优-防止SYN攻击(1分)"></a>3. Linux系统调优-防止SYN攻击(1分)</h4><p>修改 <code>controller</code> 节点的相关配置文件, 开启SYN cookie, 防止SYN洪水攻击. 修改控制器节点的相关配置文件, 开启SYN Cookie, 防止SYN洪水攻击. </p>
<p>在 <code>controller</code> 节点将 <code>cat /etc/sysctl.conf | grep -Ev ^&#39;(#|$)&#39;</code> 命令的返回结果提交到答题框</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line">echo net.ipv4.tcp_syncookies = 1 &gt;&gt; /etc/sysctl.conf</span><br><span class="line"># 刷新</span><br><span class="line">sysctl -p</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/sysctl.conf | grep -Ev ^&#x27;(#|$)&#x27;</span><br><span class="line">net.bridge.bridge-nf-call-iptables = 1</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables = 1</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="4-Keystone权限控制-1分"><a href="#4-Keystone权限控制-1分" class="headerlink" title="4. Keystone权限控制(1分)"></a>4. Keystone权限控制(1分)</h4><p>使用自行搭建的OpenStack私有云平台, 修改普通用户权限, 使普通用户不能对镜像进行创建和删除操作.</p>
<p>在 <code>controller</code> 节点将 <code>cat /etc/glance/policy.json</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 在 nova 启用 policy</span><br><span class="line">crudini --set /etc/nova/nova.conf oslo_policy policy_file /etc/glance/policy.json</span><br><span class="line"></span><br><span class="line"># 赋予 /etc/glance/policy.json 文件其他用户读权限</span><br><span class="line">chmod 644 /etc/glance/policy.json</span><br><span class="line"></span><br><span class="line"># 修改 /etc/glance/policy.json 文件 让普通用户不能对镜像进行创建和删除操作</span><br><span class="line">sed -i &#x27;s/&quot;add_image&quot;: &quot;&quot;,/&quot;add_image&quot;: &quot;role:admin&quot;,/g&#x27; /etc/glance/policy.json</span><br><span class="line">sed -i &#x27;s/&quot;delete_image&quot;: &quot;&quot;,/&quot;delete_image&quot;: &quot;role:admin&quot;,/g&#x27; /etc/glance/policy.json</span><br><span class="line"></span><br><span class="line"># 重启服务</span><br><span class="line">openstack-service restart</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/glance/policy.json</span><br><span class="line">&#123;</span><br><span class="line">    &quot;context_is_admin&quot;:  &quot;role:admin&quot;,</span><br><span class="line">    &quot;default&quot;: &quot;role:admin&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;add_image&quot;: &quot;role:admin&quot;,</span><br><span class="line">    &quot;delete_image&quot;: &quot;role:admin&quot;,</span><br><span class="line">    &quot;get_image&quot;: &quot;&quot;,</span><br><span class="line">    &quot;get_images&quot;: &quot;&quot;,</span><br><span class="line">    &quot;modify_image&quot;: &quot;&quot;,</span><br><span class="line">    &quot;publicize_image&quot;: &quot;role:admin&quot;,</span><br><span class="line">    &quot;communitize_image&quot;: &quot;&quot;,</span><br><span class="line">    &quot;copy_from&quot;: &quot;&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;download_image&quot;: &quot;&quot;,</span><br><span class="line">    &quot;upload_image&quot;: &quot;&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;delete_image_location&quot;: &quot;&quot;,</span><br><span class="line">    &quot;get_image_location&quot;: &quot;&quot;,</span><br><span class="line">    &quot;set_image_location&quot;: &quot;&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;add_member&quot;: &quot;&quot;,</span><br><span class="line">    &quot;delete_member&quot;: &quot;&quot;,</span><br><span class="line">    &quot;get_member&quot;: &quot;&quot;,</span><br><span class="line">    &quot;get_members&quot;: &quot;&quot;,</span><br><span class="line">    &quot;modify_member&quot;: &quot;&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;manage_image_cache&quot;: &quot;role:admin&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;get_task&quot;: &quot;&quot;,</span><br><span class="line">    &quot;get_tasks&quot;: &quot;&quot;,</span><br><span class="line">    &quot;add_task&quot;: &quot;&quot;,</span><br><span class="line">    &quot;modify_task&quot;: &quot;&quot;,</span><br><span class="line">    &quot;tasks_api_access&quot;: &quot;role:admin&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;deactivate&quot;: &quot;&quot;,</span><br><span class="line">    &quot;reactivate&quot;: &quot;&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;get_metadef_namespace&quot;: &quot;&quot;,</span><br><span class="line">    &quot;get_metadef_namespaces&quot;:&quot;&quot;,</span><br><span class="line">    &quot;modify_metadef_namespace&quot;:&quot;&quot;,</span><br><span class="line">    &quot;add_metadef_namespace&quot;:&quot;&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;get_metadef_object&quot;:&quot;&quot;,</span><br><span class="line">    &quot;get_metadef_objects&quot;:&quot;&quot;,</span><br><span class="line">    &quot;modify_metadef_object&quot;:&quot;&quot;,</span><br><span class="line">    &quot;add_metadef_object&quot;:&quot;&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;list_metadef_resource_types&quot;:&quot;&quot;,</span><br><span class="line">    &quot;get_metadef_resource_type&quot;:&quot;&quot;,</span><br><span class="line">    &quot;add_metadef_resource_type_association&quot;:&quot;&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;get_metadef_property&quot;:&quot;&quot;,</span><br><span class="line">    &quot;get_metadef_properties&quot;:&quot;&quot;,</span><br><span class="line">    &quot;modify_metadef_property&quot;:&quot;&quot;,</span><br><span class="line">    &quot;add_metadef_property&quot;:&quot;&quot;,</span><br><span class="line"></span><br><span class="line">    &quot;get_metadef_tag&quot;:&quot;&quot;,</span><br><span class="line">    &quot;get_metadef_tags&quot;:&quot;&quot;,</span><br><span class="line">    &quot;modify_metadef_tag&quot;:&quot;&quot;,</span><br><span class="line">    &quot;add_metadef_tag&quot;:&quot;&quot;,</span><br><span class="line">    &quot;add_metadef_tags&quot;:&quot;&quot;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="5-Nova保持云主机状态-1分"><a href="#5-Nova保持云主机状态-1分" class="headerlink" title="5. Nova保持云主机状态(1分)"></a>5. Nova保持云主机状态(1分)</h4><p>OpenStack平台若意外断电, 在电力系统恢复后, OpenStack平台可以自启动, 但是运行的云主机需要管理员手动开启, 在OpenStack平台中配置虚拟机自启动, 当宿主机启动后, 把虚拟机恢复到之前的状态, 如果虚拟机之前是关机, 则宿主机启动后, 虚拟机也是关机状态, 如果虚拟机之前是开机状态, 则宿主机启动后, 虚拟机还是开机状态中运行的虚拟机. </p>
<p>在 <code>controller</code> 节点将 <code>cat /etc/nova/nova.conf | grep -Ev ^&#39;&#39;(#|$)&#39; | grep true</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 修改配置文件</span><br><span class="line">crudini --set /etc/nova/nova.conf DEFAULT resume_guests_state_on_host_boot true</span><br><span class="line"></span><br><span class="line"># 重启服务</span><br><span class="line">openstack-service restart nova</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/nova/nova.conf | grep -Ev ^&#x27;(#|$)&#x27; | grep true</span><br><span class="line">resume_guests_state_on_host_boot = true</span><br><span class="line">service_metadata_proxy = true</span><br><span class="line">enabled = true</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="6-镜像转换-2分"><a href="#6-镜像转换-2分" class="headerlink" title="6. 镜像转换(2分)"></a>6. 镜像转换(2分)</h4><p>使用自行搭建的OpenStack平台. 上传 cirros-0.3.4-x86 64-disk.img 镜像, 请使用 qemu 相关命令, 将镜像转换为 raw 格式镜像, 转换后的镜像命名为 cirros.raw 并存放在 &#x2F;root 目录下. </p>
<p>在 <code>controller</code> 节点将 <code>qemu-img info /root/cirros.raw</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line">qemu-img convert -f qcow2 -O raw /root/cirros-0.3.4-x86_64-disk.img /root/cirros.raw</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# qemu-img info /root/cirros.raw</span><br><span class="line">image: /root/cirros.raw</span><br><span class="line">file format: raw</span><br><span class="line">virtual size: 39M (41126400 bytes)</span><br><span class="line">disk size: 18M</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="7-使用Heat模板创建网络-2分"><a href="#7-使用Heat模板创建网络-2分" class="headerlink" title="7. 使用Heat模板创建网络(2分)"></a>7. 使用Heat模板创建网络(2分)</h4><p>在自行搭建的OpenStack私有云平台上, 在&#x2F;root目录下编写Heat模板create_ network.yaml, 创建名为Heat-Network网络, 选择不共享, 创建子网名为Heat-Subnet, 子网网段设置为10.20.2.0&#x2F;24, 开启DHCP服务, 地址池为10.20.2.20-10.20.2.100, 编写完成之后不要创建堆栈. </p>
<p>在 <code>controller</code> 节点将 <code>source /root/admin-openrc &amp;&amp; openstack stack create -t /root/create_network.yaml heat-network &amp;&amp; cat /root/create_network.yaml</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 先刷脚本</span><br><span class="line">openstack-controller-heat.sh</span><br><span class="line"></span><br><span class="line">cat &lt;&lt;EOF &gt; /root/create_network.yaml</span><br><span class="line">heat_template_version: 2018-08-31</span><br><span class="line">resources:</span><br><span class="line">  network:</span><br><span class="line">    type: OS::Neutron::Net</span><br><span class="line">    properties:</span><br><span class="line">      name: &quot;Heat-Network&quot;</span><br><span class="line">  subnet:</span><br><span class="line">    type: OS::Neutron::Subnet</span><br><span class="line">    properties:</span><br><span class="line">      name: &quot;Heat-Subnet&quot;</span><br><span class="line">      enable_dhcp: true</span><br><span class="line">      cidr: 10.20.2.0/24</span><br><span class="line">      allocation_pools:</span><br><span class="line">        - start: 10.20.2.20</span><br><span class="line">          end: 10.20.2.100</span><br><span class="line">      network_id:</span><br><span class="line">        get_resource: network</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# source /root/admin-openrc &amp;&amp; openstack stack create -t /root/create_network.yaml heat-network &amp;&amp; cat /root/create_network.yaml</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| Field               | Value                                |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">| id                  | 45a73e7f-e3e8-438c-9864-a5956398c3cd |</span><br><span class="line">| stack_name          | heat-network                         |</span><br><span class="line">| description         | No description                       |</span><br><span class="line">| creation_time       | 2023-08-26T13:24:56Z                 |</span><br><span class="line">| updated_time        | None                                 |</span><br><span class="line">| stack_status        | CREATE_IN_PROGRESS                   |</span><br><span class="line">| stack_status_reason | Stack CREATE started                 |</span><br><span class="line">+---------------------+--------------------------------------+</span><br><span class="line">heat_template_version: 2018-08-31</span><br><span class="line">resources:</span><br><span class="line">  network:</span><br><span class="line">    type: OS::Neutron::Net</span><br><span class="line">    properties:</span><br><span class="line">      name: &quot;Heat-Network&quot;</span><br><span class="line">  subnet:</span><br><span class="line">    type: OS::Neutron::Subnet</span><br><span class="line">    properties:</span><br><span class="line">      name: &quot;Heat-Subnet&quot;</span><br><span class="line">      enable_dhcp: true</span><br><span class="line">      cidr: 10.20.2.0/24</span><br><span class="line">      allocation_pools:</span><br><span class="line">        - start: 10.20.2.20</span><br><span class="line">          end: 10.20.2.100</span><br><span class="line">      network_id:</span><br><span class="line">        get_resource: network</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="8-Glance镜像存储限制-2分"><a href="#8-Glance镜像存储限制-2分" class="headerlink" title="8. Glance镜像存储限制(2分)"></a>8. Glance镜像存储限制(2分)</h4><p>在OpenStack平台上, 请修改glance后端配置文件, 将用户的镜像存储配额限制为20GB. </p>
<p>在 <code>controller</code> 节点将 <code>cat /etc/glance/glance-api.conf | grep 20G</code> 命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 修改quota</span><br><span class="line">crudini --set /etc/glance/glance-api.conf DEFAULT user_storage_quota 20G</span><br><span class="line"># 重启服务</span><br><span class="line">openstack-service restart glance</span><br><span class="line">openstack-service restart glance-api</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/glance/glance-api.conf | grep 20G</span><br><span class="line">user_storage_quota = 20G</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="9-KVM-I-O优化-2分"><a href="#9-KVM-I-O优化-2分" class="headerlink" title="9. KVM I&#x2F;O优化(2分)"></a>9. KVM I&#x2F;O优化(2分)</h4><p>优化KVM的I&#x2F;O调度算法, 将默认的模式修改为none模式. </p>
<p>将 <code>cat /sys/block/vda/queue/scheduler | grep mq-deadline</code> 命令的返回结果提交到答题框. (2分)</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line">echo none &gt; /sys/block/vda/queue/scheduler</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /sys/block/vda/queue/scheduler | grep mq-deadline</span><br><span class="line">[none] mq-deadline kyber </span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h4 id="10-Cinder限速-2分"><a href="#10-Cinder限速-2分" class="headerlink" title="10. Cinder限速(2分)"></a>10. Cinder限速(2分)</h4><p>在使用Cinder服务的时候, 为了减缓来自实例的数据访问速度的减慢, OpenStack Block Storage支持对卷数据复制带宽的速率限制. 请修改cinder后端配置文件将卷复制带宽限制为最高100 MiB&#x2F;s. </p>
<p>在controller节点将cat &#x2F;etc&#x2F;cinder&#x2F;cinder.conf | grep -Ev ^’(#|$)’命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># controller</span><br><span class="line"># 添加配置项, 100MB = 100 * 1024 * 1024 (byte)</span><br><span class="line">crudini --set /etc/cinder/cinder.conf DEFAULT volume_copy_bps_limit `expr 100 \* 1024 \* 1024`</span><br><span class="line"># 重启服务</span><br><span class="line">openstack-service restart cinder</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# cat /etc/cinder/cinder.conf | grep -Ev ^&#x27;(#|$)&#x27;</span><br><span class="line">[DEFAULT]</span><br><span class="line">transport_url = rabbit://openstack:000000@controller</span><br><span class="line">auth_strategy = keystone</span><br><span class="line">my_ip = 192.168.100.8</span><br><span class="line">volume_copy_bps_limit = 104857600</span><br><span class="line">[backend]</span><br><span class="line">[backend_defaults]</span><br><span class="line">[barbican]</span><br><span class="line">[brcd_fabric_example]</span><br><span class="line">[cisco_fabric_example]</span><br><span class="line">[coordination]</span><br><span class="line">[cors]</span><br><span class="line">[database]</span><br><span class="line">connection = mysql+pymysql://cinder:000000@controller/cinder</span><br><span class="line">[fc-zone-manager]</span><br><span class="line">[healthcheck]</span><br><span class="line">[key_manager]</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">www_authenticate_uri = http://controller:5000</span><br><span class="line">auth_url = http://controller:5000</span><br><span class="line">memcached_servers = controller:11211</span><br><span class="line">auth_type = password</span><br><span class="line">project_domain_name = demo</span><br><span class="line">user_domain_name = demo</span><br><span class="line">project_name = service</span><br><span class="line">username = cinder</span><br><span class="line">password = 000000</span><br><span class="line">[nova]</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">lock_path = /var/lib/cinder/tmp</span><br><span class="line">[oslo_messaging_amqp]</span><br><span class="line">[oslo_messaging_kafka]</span><br><span class="line">[oslo_messaging_notifications]</span><br><span class="line">[oslo_messaging_rabbit]</span><br><span class="line">[oslo_middleware]</span><br><span class="line">[oslo_policy]</span><br><span class="line">[oslo_reports]</span><br><span class="line">[oslo_versionedobjects]</span><br><span class="line">[privsep]</span><br><span class="line">[profiler]</span><br><span class="line">[sample_castellan_source]</span><br><span class="line">[sample_remote_file_source]</span><br><span class="line">[service_user]</span><br><span class="line">[ssl]</span><br><span class="line">[vault]</span><br><span class="line">[root@controller ~]# </span><br></pre></td></tr></table></figure>

<h2 id="B模块-容器云-40分"><a href="#B模块-容器云-40分" class="headerlink" title="B模块: 容器云(40分)"></a>B模块: 容器云(40分)</h2><h3 id="任务1-容器云服务搭建-10分"><a href="#任务1-容器云服务搭建-10分" class="headerlink" title="任务1 容器云服务搭建(10分)"></a>任务1 容器云服务搭建(10分)</h3><h4 id="1-部署容器云平台-10分"><a href="#1-部署容器云平台-10分" class="headerlink" title="1. 部署容器云平台 (10分)"></a>1. 部署容器云平台 (10分)</h4><p>在<code>master</code>节点和<code>node</code>节点将root密码设为000000, 完成Kubernetes集群的部署, 并完成lstio服务网格 KubeVirt虚拟化和Harbor镜像仓库的部署(<code>master</code>节点依次执行<code>k8s_harbor_install.sh</code>  <code>k8s_image_push.sh</code> <code>k8s_master_install.sh</code> <code>k8s_project_install.sh</code>, <code>node</code>节点执行<code>k8s_node_install.sh</code>). </p>
<p>请将<code>kubectl cluster-info &amp;&amp; kubectl -n istio-system get all &amp;&amp; kubectl -n kubevirt get deployment</code>命令的返回结果提交到答题框. </p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># hosts</span><br><span class="line">cat &lt;&lt;EOF &gt;&gt; /etc/hosts</span><br><span class="line">192.168.100.2 master</span><br><span class="line">192.168.100.3 node</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 免密钥, 方便在一台机器操作另一台机器</span><br><span class="line">ssh-keygen</span><br><span class="line">ssh-copy-id root@node</span><br><span class="line"></span><br><span class="line"># 修改hostname</span><br><span class="line">hostnamectl set-hostname master</span><br><span class="line">ssh root@node hostnamectl set-hostname node</span><br><span class="line">scp /etc/hosts root@node:/etc/hosts</span><br><span class="line"></span><br><span class="line"># 关闭万恶之源</span><br><span class="line">setenforce 0</span><br><span class="line">systemctl disable --now firewalld</span><br><span class="line">ssh root@node setenforce 0</span><br><span class="line">ssh root@node systemctl disable --now firewalld</span><br><span class="line"></span><br><span class="line"># 解压文件</span><br><span class="line">mkdir /opt/centos</span><br><span class="line">mount /root/CentOS-7-x86_64-DVD-2009.iso /mnt</span><br><span class="line">cp -rfv /mnt/* /opt/centos/ &amp;&amp; umount /mnt</span><br><span class="line">mount /root/kubernetes_v2.1.iso /mnt</span><br><span class="line">cp -rfv /mnt/* /opt/ &amp;&amp; umount /mnt</span><br><span class="line">mount /root/Technology_packageV1.0.iso /mnt</span><br><span class="line">cp -rfv /mnt/* /root/ &amp;&amp; umount /mnt</span><br><span class="line"></span><br><span class="line"># 删除本地yum源</span><br><span class="line">rm -rf /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line"># 编写yum源</span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/local.repo</span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=file:///opt/centos/</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[k8s]</span><br><span class="line">name=k8s</span><br><span class="line">baseurl=file:///opt/kubernetes-repo/</span><br><span class="line">gpgcheck=0</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 配置ftp</span><br><span class="line">echo anon_root=/opt &gt;&gt; /etc/vsftpd/vsftpd.conf</span><br><span class="line"># 启动 vsftpd</span><br><span class="line">systemctl enable --now vsftpd</span><br><span class="line"></span><br><span class="line"># 刷脚本</span><br><span class="line"># master</span><br><span class="line">/opt/k8s_harbor_install.sh</span><br><span class="line">/opt/k8s_image_push.sh</span><br><span class="line">/opt/k8s_master_install.sh</span><br><span class="line">/opt/k8s_project_install.sh</span><br><span class="line"># node</span><br><span class="line"># 删除本地yum源</span><br><span class="line">rm -rf /etc/yum.repos.d/*</span><br><span class="line"></span><br><span class="line"># 编写yum源</span><br><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/local.repo</span><br><span class="line">[centos]</span><br><span class="line">name=centos</span><br><span class="line">baseurl=ftp://master/centos/</span><br><span class="line">gpgcheck=0</span><br><span class="line"></span><br><span class="line">[k8s]</span><br><span class="line">name=k8s</span><br><span class="line">baseurl=ftp://master/kubernetes-repo/</span><br><span class="line">gpgcheck=0</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 刷脚本</span><br><span class="line">curl ftp://master/k8s_node_install.sh | bash</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl cluster-info &amp;&amp; kubectl -n istio-system get all &amp;&amp; kubectl -n kubevirt get deployment</span><br><span class="line">Kubernetes control plane is running at https://192.168.100.2:6443</span><br><span class="line">CoreDNS is running at https://192.168.100.2:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><br><span class="line"></span><br><span class="line">To further debug and diagnose cluster problems, use &#x27;kubectl cluster-info dump&#x27;.</span><br><span class="line">Warning: kubevirt.io/v1 VirtualMachineInstancePresets is now deprecated and will be removed in v2.</span><br><span class="line">NAME                                       READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/grafana-56bdf8bf85-vt99h               1/1     Running   0          16m</span><br><span class="line">pod/istio-egressgateway-85649899f8-6x6r9   1/1     Running   0          17m</span><br><span class="line">pod/istio-ingressgateway-f56888458-fknkg   1/1     Running   0          17m</span><br><span class="line">pod/istiod-64848b6c78-tw8pg                1/1     Running   0          17m</span><br><span class="line">pod/jaeger-76cd7c7566-rtzdt                1/1     Running   0          16m</span><br><span class="line">pod/kiali-646db7568f-ht9nq                 1/1     Running   0          16m</span><br><span class="line">pod/prometheus-85949fddb-mgspx             2/2     Running   0          16m</span><br><span class="line"></span><br><span class="line">NAME                           TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                                                                      AGE</span><br><span class="line">service/grafana                ClusterIP      10.107.97.61     &lt;none&gt;        3000/TCP                                                                     16m</span><br><span class="line">service/istio-egressgateway    ClusterIP      10.110.57.184    &lt;none&gt;        80/TCP,443/TCP                                                               17m</span><br><span class="line">service/istio-ingressgateway   LoadBalancer   10.102.192.110   &lt;pending&gt;     15021:31477/TCP,80:30003/TCP,443:32385/TCP,31400:31524/TCP,15443:31555/TCP   17m</span><br><span class="line">service/istiod                 ClusterIP      10.108.217.107   &lt;none&gt;        15010/TCP,15012/TCP,443/TCP,15014/TCP                                        17m</span><br><span class="line">service/jaeger-collector       ClusterIP      10.103.142.170   &lt;none&gt;        14268/TCP,14250/TCP,9411/TCP                                                 16m</span><br><span class="line">service/kiali                  ClusterIP      10.100.95.148    &lt;none&gt;        20001/TCP,9090/TCP                                                           16m</span><br><span class="line">service/prometheus             ClusterIP      10.99.80.111     &lt;none&gt;        9090/TCP                                                                     16m</span><br><span class="line">service/tracing                ClusterIP      10.101.162.103   &lt;none&gt;        80/TCP,16685/TCP                                                             16m</span><br><span class="line">service/zipkin                 ClusterIP      10.97.249.220    &lt;none&gt;        9411/TCP                                                                     16m</span><br><span class="line"></span><br><span class="line">NAME                                   READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">deployment.apps/grafana                1/1     1            1           16m</span><br><span class="line">deployment.apps/istio-egressgateway    1/1     1            1           17m</span><br><span class="line">deployment.apps/istio-ingressgateway   1/1     1            1           17m</span><br><span class="line">deployment.apps/istiod                 1/1     1            1           17m</span><br><span class="line">deployment.apps/jaeger                 1/1     1            1           16m</span><br><span class="line">deployment.apps/kiali                  1/1     1            1           16m</span><br><span class="line">deployment.apps/prometheus             1/1     1            1           16m</span><br><span class="line"></span><br><span class="line">NAME                                             DESIRED   CURRENT   READY   AGE</span><br><span class="line">replicaset.apps/grafana-56bdf8bf85               1         1         1       16m</span><br><span class="line">replicaset.apps/istio-egressgateway-85649899f8   1         1         1       17m</span><br><span class="line">replicaset.apps/istio-ingressgateway-f56888458   1         1         1       17m</span><br><span class="line">replicaset.apps/istiod-64848b6c78                1         1         1       17m</span><br><span class="line">replicaset.apps/jaeger-76cd7c7566                1         1         1       16m</span><br><span class="line">replicaset.apps/kiali-646db7568f                 1         1         1       16m</span><br><span class="line">replicaset.apps/prometheus-85949fddb             1         1         1       16m</span><br><span class="line">NAME              READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">virt-api          1/1     1            1           12m</span><br><span class="line">virt-controller   2/2     2            2           11m</span><br><span class="line">virt-operator     2/2     2            2           12m</span><br><span class="line">[root@master ~]# </span><br></pre></td></tr></table></figure>

<h3 id="任务2-容器云服务运维-30分"><a href="#任务2-容器云服务运维-30分" class="headerlink" title="任务2 容器云服务运维(30分)"></a>任务2 容器云服务运维(30分)</h3><h4 id="1-容器化部署Memcache服务-2分"><a href="#1-容器化部署Memcache服务-2分" class="headerlink" title="1. 容器化部署Memcache服务(2分)"></a>1. 容器化部署Memcache服务(2分)</h4><p>编写 Dockerfile-memcached 文件构建 blog-memcached:v1.0 镜像，具体要求如下:</p>
<ol>
<li>需要的包在 Technology_packageV1.0.iso 中 DjangoBlog.tar.gz</li>
<li>基础镜像: centos:7.9.2009，完成memcached服务的安装</li>
<li>声明端口: 11211</li>
<li>设置服务开机自启。</li>
</ol>
<p>使用相关的docker build命令进行构建，将<code>docker run -d --name blog-test blog-memcached:v1.0 &amp;&amp; sleep 5 &amp;&amp; docker exec blog-test ps -aux &amp;&amp; docker rm -f blog-test</code>命令的返回结果提交至答题框</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 初始化操作 这个只要操作一次就行 后续不用在操作</span><br><span class="line"># 解压文件DjangoBlog.tar.gz </span><br><span class="line">tar xzvf /root/DjangoBlog.tar.gz -C /root/</span><br><span class="line"></span><br><span class="line"># 导入镜像</span><br><span class="line">docker load -i /root/DjangoBlog/CentOS_7.9.2009.tar </span><br><span class="line"></span><br><span class="line"># 复制yum源文件公开到ftp上</span><br><span class="line">cp -rfv /root/DjangoBlog/yum /opt/</span><br><span class="line"></span><br><span class="line"># 编写yum源</span><br><span class="line">cat &lt;&lt;EOF &gt; /root/DjangoBlog/ftp.repo</span><br><span class="line">[ftp-yum]</span><br><span class="line">name=ftp-yum</span><br><span class="line">baseurl=ftp://192.168.100.2/yum/</span><br><span class="line">gpgcheck=0</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 编写Dockerfile</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/DjangoBlog/Dockerfile-memcached </span><br><span class="line">FROM centos:centos7.9.2009</span><br><span class="line">RUN rm -rf /etc/yum.repos.d/*</span><br><span class="line">COPY ftp.repo /etc/yum.repos.d/</span><br><span class="line">RUN yum install -y memcached</span><br><span class="line">EXPOSE 11211</span><br><span class="line">ENTRYPOINT /usr/bin/memcached -u root</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 构建镜像</span><br><span class="line">docker build -f /root/DjangoBlog/Dockerfile-memcached -t blog-memcached:v1.0 /root/DjangoBlog/</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker run -d --name blog-test blog-memcached:v1.0 &amp;&amp; sleep 5 &amp;&amp; docker exec blog-test ps -aux &amp;&amp; docker rm -f blog-test</span><br><span class="line">f9cb8b5ae11e02d0ee622ab781c0213cfde05b8614a1ff5ba24ceb9d8a0a9d99</span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root         1  0.8  0.0 344100  1684 ?        Ssl  12:55   0:00 /usr/bin/memcached -u root</span><br><span class="line">root        12  0.0  0.0  51732  1696 ?        Rs   12:55   0:00 ps -aux</span><br><span class="line">blog-test</span><br><span class="line">[root@master ~]# </span><br></pre></td></tr></table></figure>

<h4 id="2-容器化部署MariaDB服务-2分"><a href="#2-容器化部署MariaDB服务-2分" class="headerlink" title="2. 容器化部署MariaDB服务(2分)"></a>2. 容器化部署MariaDB服务(2分)</h4><p>编写 Dockerfile-mariadb 文件构建blog-mysql:v1.0镜像，要求基于centos完成MariaDB服务的安装与配置，并设置服务开机自启。</p>
<ol>
<li>基础镜像: centos:7.9.2009</li>
<li>安装MariaDB服务并设置root用户的密码为root</li>
<li>创建数据库 djangoblog 并将 sqlfile.sql 导入该数据库</li>
<li>声明端口: 3306 并设置开机自启动</li>
<li>完成后使用docker build相关命令构建镜像。(需要的包在Technology_packageV1.0.iso 中 DjangoBlog.tar.gz)</li>
</ol>
<p>将<code>docker run -d --name mariadb-test blog-mysql:v1.0 &amp;&amp; sleep 15 &amp;&amp; docker exec mariadb-test mysql -uroot -proot -e &quot;use djangoblog;show tables&quot; &amp;&amp; docker rm -f mariadb-test</code>命令的返回结果提交至答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 编写初始化数据库的脚本</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/DjangoBlog/init_mysql.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">mysql_install_db --user=root</span><br><span class="line">mysqld_safe --user=root &amp;</span><br><span class="line">sleep 5</span><br><span class="line">mysqladmin -u root password &#x27;root&#x27;</span><br><span class="line">mysql -uroot -proot -e &quot;GRANT ALL ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;root&#x27;;&quot;</span><br><span class="line">mysql -uroot -proot -e &quot;CREATE DATABASE djangoblog; USE djangoblog; SOURCE /opt/sqlfile.sql;&quot;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 编写 Dockerfile</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/DjangoBlog/Dockerfile-mariadb</span><br><span class="line">FROM centos:centos7.9.2009</span><br><span class="line">RUN rm -rf /etc/yum.repos.d/*</span><br><span class="line">COPY ftp.repo /etc/yum.repos.d/</span><br><span class="line">COPY init_mysql.sh /opt/</span><br><span class="line">COPY sqlfile.sql /opt</span><br><span class="line">RUN yum install -y mariadb mariadb-server</span><br><span class="line">RUN bash /opt/init_mysql.sh</span><br><span class="line">EXPOSE 3306</span><br><span class="line">CMD [&quot;mysqld_safe&quot;, &quot;--user=root&quot;]</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 构建镜像</span><br><span class="line">docker build -f /root/DjangoBlog/Dockerfile-mariadb -t blog-mysql:v1.0 /root/DjangoBlog/</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker run -d --name mariadb-test blog-mysql:v1.0 &amp;&amp; sleep 15 &amp;&amp; docker exec mariadb-test mysql -uroot -proot -e &quot;use djangoblog;show tables&quot; &amp;&amp; docker rm -f mariadb-test</span><br><span class="line">670ab20155715b3a7ee9208b9704d0c862255697b0e625e4bcee915a7cc9507c</span><br><span class="line">Tables_in_djangoblog</span><br><span class="line">accounts_bloguser</span><br><span class="line">accounts_bloguser_groups</span><br><span class="line">accounts_bloguser_user_permissions</span><br><span class="line">auth_group</span><br><span class="line">auth_group_permissions</span><br><span class="line">auth_permission</span><br><span class="line">blog_article</span><br><span class="line">blog_article_tags</span><br><span class="line">blog_blogsettings</span><br><span class="line">blog_category</span><br><span class="line">blog_links</span><br><span class="line">blog_sidebar</span><br><span class="line">blog_tag</span><br><span class="line">comments_comment</span><br><span class="line">django_admin_log</span><br><span class="line">django_content_type</span><br><span class="line">django_migrations</span><br><span class="line">django_session</span><br><span class="line">django_site</span><br><span class="line">oauth_oauthconfig</span><br><span class="line">oauth_oauthuser</span><br><span class="line">owntracks_owntracklog</span><br><span class="line">servermanager_commands</span><br><span class="line">servermanager_emailsendlog</span><br><span class="line">mariadb-test</span><br><span class="line">[root@master ~]# </span><br></pre></td></tr></table></figure>

<h4 id="3-容器化部署前端服务-2分"><a href="#3-容器化部署前端服务-2分" class="headerlink" title="3. 容器化部署前端服务(2分)"></a>3. 容器化部署前端服务(2分)</h4><p>编写Dockerfile-nginx文件构建blog-nginx:v1.0镜像，要求基于centos完成Nginx服务的安装与配置，并设置服务开机自启。具体要求如下:</p>
<ol>
<li>基础镜像: centos:7.9.2009</li>
<li>安装nginx服务，使用提供的nginx.conf作为默认的配置文件</li>
<li>声明端口:80, 并设置开机自启。(需要的包在Technology_packageV1.0.iso中)</li>
</ol>
<p>使用docker build 相关命令进行构建，将<code>docker run -d --name nginx-test blog-nginx:v1.0 &amp;&amp; docker logs nginx-test &amp;&amp; docker rm -f nginx-test</code>命令的返回结果提交至答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 编写 Dockerfile</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/DjangoBlog/Dockerfile-nginx</span><br><span class="line">FROM centos:centos7.9.2009</span><br><span class="line">RUN rm -rf /etc/yum.repos.d/*</span><br><span class="line">COPY ftp.repo /etc/yum.repos.d/</span><br><span class="line">RUN yum install -y nginx</span><br><span class="line">ADD nginx.conf /etc/nginx/nginx.conf</span><br><span class="line">EXPOSE 80</span><br><span class="line">CMD [&quot;/usr/sbin/nginx&quot;,&quot;-g&quot;,&quot;daemon off;&quot;]</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 构建镜像</span><br><span class="line">docker build -f /root/DjangoBlog/Dockerfile-nginx -t blog-nginx:v1.0 /root/DjangoBlog/</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# docker run -d --name nginx-test blog-nginx:v1.0 &amp;&amp; docker logs nginx-test &amp;&amp; docker rm -f nginx-test</span><br><span class="line">c9e5084d0eb1859ff8c22430fde2017696702710ea0387d30767e06d1614fcf5</span><br><span class="line">nginx-test</span><br><span class="line">[root@master ~]# </span><br></pre></td></tr></table></figure>

<h4 id="4-容器化部署Blog服务-2分"><a href="#4-容器化部署Blog服务-2分" class="headerlink" title="4. 容器化部署Blog服务(2分)"></a>4. 容器化部署Blog服务(2分)</h4><p>编写Dockerfile-blog文件构建blog-service:v1.0镜像</p>
<ol>
<li>要求基于centos:7.9.2009</li>
<li>安装Python3.6环境, 使用pip3工具离线安装requirements.txt中的软件包</li>
<li>安装 DjangoBlog 服务</li>
<li>声明端口:8000, 设置DjangoBlog服务开机自启。(需要的包在Technology_packageV1.0.iso中DjangoBlog.tar.gz)</li>
</ol>
<p>使用docker build相关命令进行构建，将 <code>docker build -t blog-service:v1.0 -f Dockerfile-blog .</code> 命令的返回结果提交至答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 编写 Dockerfile</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/DjangoBlog/Dockerfile-blog</span><br><span class="line">FROM centos:centos7.9.2009</span><br><span class="line">RUN rm -rf /etc/yum.repos.d/*</span><br><span class="line">COPY ftp.repo /etc/yum.repos.d/</span><br><span class="line">ADD . /code/djangoBlog</span><br><span class="line">RUN yum install -y make gcc openssl-devel zlib-devel mysql-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel python-devel</span><br><span class="line">RUN tar -zxvf /code/djangoBlog/Python-3.6.5.tgz -C /opt/</span><br><span class="line">RUN cd /opt/Python-3.6.5/ &amp;&amp; ./configure &amp;&amp; make -j &amp;&amp; make install -j</span><br><span class="line">RUN pip3 install --upgrade pip --no-index --find-links=/code/djangoBlog/Python-pip</span><br><span class="line">RUN pip3 install -r /code/djangoBlog/requirements.txt --no-index --find-links=/code/djangoBlog/Python-pip</span><br><span class="line">RUN pip3 install gunicorn[gevent] --no-index --find-links=/code/djangoBlog/Python-pip</span><br><span class="line">RUN pip3 cache purge</span><br><span class="line">RUN chmod +x /code/djangoBlog/bin/docker_start.sh</span><br><span class="line">EXPOSE 8000</span><br><span class="line">ENTRYPOINT [&quot;/code/djangoBlog/bin/docker_start.sh&quot;]</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 构建镜像</span><br><span class="line">docker build -t blog-service:v1.0 -f /root/DjangoBlog/Dockerfile-blog /root/DjangoBlog/</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master DjangoBlog]# docker build -t blog-service:v1.0 -f Dockerfile-blog .</span><br><span class="line">Sending build context to Docker daemon  813.6MB</span><br><span class="line">略...(太长了)</span><br><span class="line">Successfully built acdbd8b1592f</span><br><span class="line">Successfully tagged blog-service:v1.0</span><br><span class="line">[root@master DjangoBlog]# </span><br></pre></td></tr></table></figure>

<h4 id="5-编排部署博客系统（2分"><a href="#5-编排部署博客系统（2分" class="headerlink" title="5. 编排部署博客系统（2分)"></a>5. 编排部署博客系统（2分)</h4><p>编写docker-compose.yaml文件，具体要求如下:(需要的包在Technology_packageV1.0.iso中DjangoBlog.tar.gz)</p>
<p>容器: blog-memcached镜像: blog-memcached:v1.0;端口映射:11211:11211; 容器: blog-mysql;镜像: blog-mysql:v1.0;端口映射:3306:3306; 容器: blog-nginx;镜像: blog-nginx:v1.0;端口映射:80:8888; 容器: blog-service;镜像: blog-service:v1.0;端口映射:8000:8000。</p>
<p>编写完成后，使用docker-compose up -d 命令进行启动，使用 docker-compose ps 进行查看，使用 curl -l http:&#x2F;&#x2F;$(hostname -i):8888 | grep title 进行查看，将以上命令的返回结果提交至答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 编写 docker-compose.yaml</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/DjangoBlog/docker-compose.yaml</span><br><span class="line">version: &#x27;3&#x27;</span><br><span class="line">services:</span><br><span class="line">  memcached:</span><br><span class="line">   restart: always</span><br><span class="line">   image: blog-memcached:v1.0</span><br><span class="line">   container_name: blog-memcached</span><br><span class="line">   ports:</span><br><span class="line">    - &quot;11211:11211&quot;</span><br><span class="line">  mysql:</span><br><span class="line">   restart: always</span><br><span class="line">   image: blog-mysql:v1.0</span><br><span class="line">   container_name: blog-mysql</span><br><span class="line">   environment:</span><br><span class="line">    - MYSQL_DATABASE=djangoblog</span><br><span class="line">    - MYSQL_ROOT_PASSWORD=root</span><br><span class="line">   ports:</span><br><span class="line">    - 3306:3306</span><br><span class="line">   depends_on:</span><br><span class="line">    - memcached</span><br><span class="line">  djangoblog:</span><br><span class="line">   restart: always</span><br><span class="line">   image: blog-service:v1.0</span><br><span class="line">   container_name: blog-service</span><br><span class="line">   ports:</span><br><span class="line">    - &quot;8000:8000&quot;</span><br><span class="line">   environment:</span><br><span class="line">    - DJANGO_MYSQL_DATABASE=djangoblog</span><br><span class="line">    - DJANGO_MYSQL_USER=root</span><br><span class="line">    - DJANGO_MYSQL_PASSWORD=root</span><br><span class="line">    - DJANGO_MYSQL_HOST=mysql</span><br><span class="line">    - DJANGO_MYSQL_PORT=3306</span><br><span class="line">    - DJANGO_MEMCHACED_LOCATION=memcached:11211</span><br><span class="line">   volumes:</span><br><span class="line">    - ./collectedstatic:/code/djangoBlog/collectedstatic</span><br><span class="line">   links:</span><br><span class="line">    - mysql</span><br><span class="line">    - memcached</span><br><span class="line">   depends_on:</span><br><span class="line">    - mysql</span><br><span class="line">  nginx:</span><br><span class="line">   restart: always</span><br><span class="line">   image: blog-nginx:v1.0</span><br><span class="line">   container_name: blog-nginx</span><br><span class="line">   ports:</span><br><span class="line">    - &quot;8888:80&quot;</span><br><span class="line">    - &quot;443:443&quot;</span><br><span class="line">   volumes:</span><br><span class="line">    - ./collectedstatic:/code/djangoblog/collectedstatic</span><br><span class="line">   links:</span><br><span class="line">    - djangoblog:djangoblog</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 启动dockercompose</span><br><span class="line">cd /root/DjangoBlog/ &amp;&amp; docker-compose up -d</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@master DjangoBlog]# curl -l http://$(hostname -i):8888 | grep title</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  6531  100  6531    0     0   168k      0 --:--:-- --:--:-- --:--:--  172k</span><br><span class="line">        &lt;title&gt;djangoblog | 基于Django的博客系统&lt;/title&gt;</span><br><span class="line">    &lt;meta property=&quot;og:title&quot; content=&quot;djangoblog&quot;/&gt;</span><br><span class="line">    &lt;link rel=&quot;alternate&quot; type=&quot;application/rss+xml&quot; title=&quot;djangoblog &amp;raquo; Feed&quot;</span><br><span class="line">            &lt;h1 class=&quot;site-title&quot;&gt;&lt;a href=&quot;/&quot; title=&quot;djangoblog&quot; rel=&quot;home&quot;&gt;djangoblog&lt;/a&gt;</span><br><span class="line">    &lt;a class=&quot;assistive-text&quot; href=&quot;#content&quot; title=&quot;跳至正文&quot;&gt;跳至正文&lt;/a&gt;</span><br><span class="line">    &lt;aside id=&quot;text-2&quot; class=&quot;widget widget_text&quot;&gt;&lt;p class=&quot;widget-title&quot;&gt;欢迎您star或者fork本站源代码&lt;/p&gt;</span><br><span class="line">    &lt;aside id=&quot;meta-3&quot; class=&quot;widget widget_meta&quot;&gt;&lt;p class=&quot;widget-title&quot;&gt;功能&lt;/p&gt;</span><br><span class="line">    &lt;div id=&quot;rocket&quot; class=&quot;show&quot; title=&quot;点我返回顶部&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;a href=&quot;/sitemap.xml&quot; title=&quot;SiteMap&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">        &lt;a href=&quot;/feed&quot; title=&quot;RSS Feed&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">        &lt;a href=&quot;/links.html&quot; title=&quot;友情链接&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">[root@master DjangoBlog]# </span><br></pre></td></tr></table></figure>

<h4 id="6-导入jenkins镜像-2分"><a href="#6-导入jenkins镜像-2分" class="headerlink" title="6. 导入jenkins镜像(2分)"></a>6. 导入jenkins镜像(2分)</h4><p>基于Kubernetes构建持续集成,master节点、harbor节点和cicd节点对应的IP都为master节点的IP, CICD_Offline.tar(需要的包在 Technology_packageV1.0.iso中CICD_Offline.tar)。把CICD_Offline.tar移动到&#x2F;opt目录下然后解压。导入jenkins.tar文件中的镜像。</p>
<p>将docker images | grep jenkins命令的返回结果提交到答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 移动并解压</span><br><span class="line">mv /root/CICD_Offline.tar /opt/</span><br><span class="line">tar xzvf /root/CICD_Offline.tar -C /opt/</span><br><span class="line"></span><br><span class="line"># 导入Jenkins镜像</span><br><span class="line">docker load -i /opt/jenkins.tar</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master opt]# docker images | grep jenkins</span><br><span class="line">jenkins/jenkins                                                   2.262-centos     f04839b3e211   2 years ago      638MB</span><br><span class="line">[root@master opt]# </span><br></pre></td></tr></table></figure>

<h4 id="7-安装Jenkins-2分"><a href="#7-安装Jenkins-2分" class="headerlink" title="7. 安装Jenkins(2分)"></a>7. 安装Jenkins(2分)</h4><p>编写Jenkins编排文件，并启动Jenkins。</p>
<p>将docker-compose ps命令的返回结果提交到答题框.</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 本题图片操作略.</span><br><span class="line"># 创建单独的文件夹</span><br><span class="line">mkdir /root/CICD_Jenkins</span><br><span class="line">mkdir /root/CICD_Jenkins/jenkins/</span><br><span class="line"></span><br><span class="line"># 编写dockercompose.yaml</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/CICD_Jenkins/docker-compose.yaml</span><br><span class="line">version: &#x27;3&#x27;</span><br><span class="line">services:</span><br><span class="line">  jenkins:</span><br><span class="line">    image: jenkins/jenkins:2.262-centos</span><br><span class="line">    ports: </span><br><span class="line">    - 8080:8080</span><br><span class="line">    user: root</span><br><span class="line">    volumes:</span><br><span class="line">      - ./jenkins/:/var/jenkins_home/</span><br><span class="line">      - /var/run/docker.sock:/var/run/docker.sock:ro</span><br><span class="line">      - /usr/bin/docker:/usr/bin/docker:ro</span><br><span class="line">      - /usr/bin/kubectl:/usr/bin/kubectl:ro</span><br><span class="line">      - /root/.kube/:/root/.kube/:ro</span><br><span class="line">      - /opt/repository/:/root/.m2/repository/</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 启动</span><br><span class="line">cd /root/CICD_Jenkins &amp;&amp; docker-compose up -d</span><br><span class="line"></span><br><span class="line"># 初始化完成jenkins后安装插件</span><br><span class="line">cp -rfv /opt/plugins/ /root/CICD_Jenkins/jenkins/</span><br><span class="line"></span><br><span class="line"># 重启</span><br><span class="line">cd /root/CICD_Jenkins &amp;&amp; docker-compose restart</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master CICD_Jenkins]# docker-compose ps</span><br><span class="line">NAME                     COMMAND                  SERVICE             STATUS              PORTS</span><br><span class="line">cicd_jenkins-jenkins-1   &quot;/sbin/tini -- /usr/…&quot;   jenkins             running             0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp, 50000/tcp</span><br><span class="line">[root@master CICD_Jenkins]# </span><br></pre></td></tr></table></figure>

<h4 id="8-部署Gitlab-2分"><a href="#8-部署Gitlab-2分" class="headerlink" title="8. 部署Gitlab(2分)"></a>8. 部署Gitlab(2分)</h4><p>编写Gitlab编排文件并启动Gitlab。</p>
<p>将docker-compose ps命令的返回结果提交到答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line">mkdir /root/CICD_GitLab</span><br><span class="line"></span><br><span class="line"># 编写dockercompose</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/CICD_GitLab/docker-compose.yaml </span><br><span class="line">version: &#x27;3&#x27;</span><br><span class="line">services:</span><br><span class="line">  gitlab:</span><br><span class="line">    image: &#x27;gitlab/gitlab-ce:12.9.2-ce.0&#x27;</span><br><span class="line">    environment:</span><br><span class="line">      TZ: &#x27;Asia/Shanghai&#x27;</span><br><span class="line">      GITLAB_OMNIBUS_CONFIG: |</span><br><span class="line">        external_url &#x27;http://192.168.100.2:50080&#x27;</span><br><span class="line">    ports:</span><br><span class="line">      - &#x27;50080:50080&#x27;</span><br><span class="line">      - &#x27;50443:443&#x27;</span><br><span class="line">      - &#x27;50022:22&#x27;</span><br><span class="line">    volumes:</span><br><span class="line">      - &#x27;./config:/etc/gitlab&#x27;</span><br><span class="line">      - &#x27;./logs:/var/log/gitlab&#x27;</span><br><span class="line">      - &#x27;./data:/var/opt/gitlab&#x27;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 创建相关文件</span><br><span class="line">mkdir /root/CICD_GitLab/&#123;config,logs,data&#125;</span><br><span class="line"></span><br><span class="line"># GitLab启动!</span><br><span class="line">cd /root/CICD_GitLab/ &amp;&amp; docker-compose up -d</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@master CICD_GitLab]# docker-compose ps</span><br><span class="line">NAME                   COMMAND             SERVICE             STATUS              PORTS</span><br><span class="line">cicd_gitlab-gitlab-1   &quot;/assets/wrapper&quot;   gitlab              running (healthy)   80/tcp, 0.0.0.0:50080-&gt;50080/tcp, :::50080-&gt;50080/tcp, 0.0.0.0:50022-&gt;22/tcp, :::50022-&gt;22/tcp, 0.0.0.0:50443-&gt;443/tcp, :::50443-&gt;443/tcp</span><br><span class="line">[root@master CICD_GitLab]# </span><br></pre></td></tr></table></figure>

<h4 id="9-push源代码-2分"><a href="#9-push源代码-2分" class="headerlink" title="9. push源代码(2分)"></a>9. push源代码(2分)</h4><p>push源代码到gitlab的springcloud项目，并完成相关配置。</p>
<p>将 <code>git push -u origin master</code> 命令的返回结果提交到答题框。</p>
<p><strong>operating:</strong></p>
<ol>
<li>初始化Gitlab服务器, 密码建议同一 <code>00000000</code></li>
</ol>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/377d8a1e6a3b066832cb2547df61230dc6d6dfa0.png" alt="image-20230829214158469"></p>
<ol>
<li>登录Gitlab平台</li>
</ol>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/523831b5386dd9031b4d103c2c7c2246c7c8f83d.png" alt="image-20230829214251824"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/e86aa9bfee0c15fe5ed6682ff550d83cc8b6e24e/0163f632cec7f6fe271dddd9905bbe4588b053be.png" alt="image-20230827234634174"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/e86aa9bfee0c15fe5ed6682ff550d83cc8b6e24e/2b9a297a26f9ebb07258d074849a8be2c705f1b3.png" alt="image-20230827234728424"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/e86aa9bfee0c15fe5ed6682ff550d83cc8b6e24e/7da21861e3215cb4a53c9168067cf3c0d0d5edc4.png" alt="image-20230827235242886"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 回到shell来</span><br><span class="line">yum install -y git</span><br><span class="line">cd /opt/springcloud</span><br><span class="line">git remote remove origin</span><br><span class="line"># 若想简单操作, 在这一步就直接使用http传输git, 则在push时需要手动输入密码</span><br><span class="line">git remote add origin http://192.168.100.2:50080/root/springcloud.git</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@master springcloud]# git push -u origin master</span><br><span class="line">Username for &#x27;http://192.168.100.2:50080&#x27;: root</span><br><span class="line">Password for &#x27;http://root@192.168.100.2:50080&#x27;: </span><br><span class="line">Counting objects: 3192, done.</span><br><span class="line">Delta compression using up to 8 threads.</span><br><span class="line">Compressing objects: 100% (1428/1428), done.</span><br><span class="line">Writing objects: 100% (3192/3192), 1.40 MiB | 0 bytes/s, done.</span><br><span class="line">Total 3192 (delta 1233), reused 3010 (delta 1207)</span><br><span class="line">remote: Resolving deltas: 100% (1233/1233), done.</span><br><span class="line">To http://192.168.100.2:50080/root/springcloud.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br><span class="line">Branch master set up to track remote branch master from origin.</span><br><span class="line">[root@master springcloud]# </span><br></pre></td></tr></table></figure>

<h4 id="10-Jenkins连接maven-2分"><a href="#10-Jenkins连接maven-2分" class="headerlink" title="10. Jenkins连接maven (2分)"></a>10. Jenkins连接maven (2分)</h4><p>安装maven并完成相关配置。</p>
<p>将 <code>docker exec jenkins bash -c &quot;source /etc/profile &amp;&amp; mvn -v&quot;</code> 命令的返回结果提交到答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 将mvn添加到jenkins目录中</span><br><span class="line">cp /opt/apache-maven-3.6.3-bin.tar.gz /root/CICD_Jenkins/jenkins/</span><br><span class="line"></span><br><span class="line"># 进入shell</span><br><span class="line">cd /root/CICD_Jenkins &amp;&amp; docker-compose exec jenkins bash</span><br><span class="line"></span><br><span class="line"># 解压</span><br><span class="line">tar xzvf /var/jenkins_home/apache-maven-3.6.3-bin.tar.gz -C /var/jenkins_home/</span><br><span class="line"></span><br><span class="line"># 设置环境变量</span><br><span class="line">cat &lt;&lt; EOF &gt;&gt; /etc/profile</span><br><span class="line">export MVN_HOME=/var/jenkins_home/apache-maven-3.6.3</span><br><span class="line">export PATH=\$MVN_HOME/bin:\$PATH</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@master CICD_Jenkins]# docker exec cicd_jenkins-jenkins-1 bash -c &quot;source /etc/profile &amp;&amp; mvn -v&quot;</span><br><span class="line">Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)</span><br><span class="line">Maven home: /var/jenkins_home/apache-maven-3.6.3</span><br><span class="line">Java version: 1.8.0_265, vendor: Oracle Corporation, runtime: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.265.b01-0.el8_2.x86_64/jre</span><br><span class="line">Default locale: en_US, platform encoding: ANSI_X3.4-1968</span><br><span class="line">OS name: &quot;linux&quot;, version: &quot;3.10.0-1160.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;</span><br><span class="line">[root@master CICD_Jenkins]# </span><br></pre></td></tr></table></figure>

<h4 id="11-触发CI-CD-2分"><a href="#11-触发CI-CD-2分" class="headerlink" title="11. 触发CI&#x2F;CD (2分)"></a>11. 触发CI&#x2F;CD (2分)</h4><p>上传代码触发自动构建。</p>
<p>将 curl <code>kubectl get endpoints -n springcloud gateway | grep -v AGE| awk &#39;&#123;print $2&#125;&#39;</code> 命令的返回结果提交到答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># 本题操作图片居多, 请注意流量消耗</span><br></pre></td></tr></table></figure>

<ol>
<li><p>请登录 <code>jenkins</code> 修改相关的配置项</p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/0a373709f01bbe1a490bd5e2dd80bc0d710be9fc.png" alt="image-20230829194019674"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/c5a616691064bed65831c5cf013d2cbc749fc0d1.png" alt="image-20230829194054512"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/bf2cfd73ade80a4be5cb231f5ca2e3dab910a638.png" alt="image-20230829194202496"></p>
<ol>
<li>配置jenkins连接gitlab的接口</li>
</ol>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/935b1e5a414a5e3701e35a609bb6aaaccda7f5c8.png" alt="image-20230829214936636"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/46cfa60c22dbdd2c0d0f0be44d533071229f72a0.png" alt="image-20230829215001704"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/200913f48052dc1b522f35eb4407c9b4b4751e26.png" alt="image-20230829215325423"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/826596f366fb2a38df993825d9c99be3f5166173.png" alt="image-20230829215357715"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/fb5074c6d95e8e7569cc2932e08628c9206e7974.png" alt="image-20230829214707937"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/52378c5db7b62a381423862d841da43fd39a5efb.png" alt="image-20230829215502899"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/0c6d9ab53eb056b8b5480e8c9409f4051d859101.png" alt="image-20230829215532201"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/8016550aeda4ee46c7a402898bee51dea8c5cc34.png" alt="image-20230829215650210"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/fb0672d196e99b1bac27c6f1f503f17cb1a9fbda.png" alt="image-20230829215759769"></p>
<ol>
<li>配置Gitlab, 允许外部网络请求</li>
</ol>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/43d706998ede35518fbc1c2605909522b0e88894.png" alt="image-20230829215934129"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/19323ab3491dd449fb02c1c85012d8488131de27.png" alt="image-20230829220007633"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/07556991629c34414449df85adda8fbd1dde0a77.png" alt="image-20230829220149322"></p>
<ol>
<li>回到jenkins, 准备编写流水线, 先配置流水线的webhooks url</li>
</ol>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/bfe2327fbce3bfe15a548cc7d3604d64f1100980.png" alt="image-20230829220233735"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/94c71f5367567bec995e82850ac832e8d8c4acb0.png" alt="image-20230829220256855"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/174532371b62aa9268b4c2fa522219a4b62962d2.png" alt="image-20230829220413273"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/2f5cc6a65929963d6511733a56ee2e16dd8646c5.png" alt="image-20230829220834672"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/2ae3c72a5e1d95fed640263c3b65449576850e48.png" alt="image-20230829221002143"></p>
<ol>
<li>复制jenkins的git clone的链接</li>
</ol>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/370c3abb0655a325d360a6019813c241018a6d4d.png" alt="image-20230829220446918"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/141d8c55f827502299b332ab51d99968bdb31c55.png" alt="image-20230829220518832"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/04d845644e716e70f8b55ce84bc240c0dd161c1f.png" alt="image-20230829220558518"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/f16b09b3b55e21751585d5ec82cc611e2cb11ac1.png" alt="image-20230829220620942"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/d1220c0d41f57be45ca500069ddba4c4fcc330d6.png" alt="image-20230829220703455"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/b3e817f30e48e0831aaa482df8e2d7676af5704a.png" alt="image-20230829220739194"></p>
<ol>
<li>编写流水线脚本</li>
</ol>
<p>这里给一段我自己编写的示例代码, 没必要和我这个一样</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agent any</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">   </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stages &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stage(&#x27;clone project&#x27;) &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steps &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git credentialsId: &#x27;b82573be-fd0a-42e0-a403-75130920d79c&#x27;, url: &#x27;http://192.168.100.2:50080/root/springcloud.git&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stage(&#x27;build project&#x27;) &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steps &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;source /etc/profile; mvn package -DskipTests&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stage(&#x27;build images&#x27;) &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steps &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;cd config; docker build -t 192.168.100.2/springcloud/piggymetrics-config:$BUILD_ID .&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;cd gateway; docker build -t 192.168.100.2/springcloud/piggymetrics-gateway:$BUILD_ID .&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stage(&#x27;upload images&#x27;) &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steps &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login 192.168.100.2 -u=admin -p=Harbor12345</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push 192.168.100.2/springcloud/piggymetrics-config:$BUILD_ID</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push 192.168.100.2/springcloud/piggymetrics-gateway:$BUILD_ID</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stage(&#x27;deployment project&#x27;) &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steps &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;sed -i &quot;s/sqshq\\/piggymetrics-config/192.168.100.2\\/springcloud\\/piggymetrics-config:$BUILD_ID/g&quot; yaml/deployment/config-deployment.yaml&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;sed -i &quot;s/sqshq\\/piggymetrics-gateway/192.168.100.2\\/springcloud\\/piggymetrics-gateway:$BUILD_ID/g&quot; yaml/deployment/gateway-deployment.yaml&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">                   </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;kubectl create ns springcloud --dry-run=client -oyaml | kubectl apply -f -&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">                   </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;kubectl apply -f yaml/deployment/config-deployment.yaml ‐‐kubeconfig=/root/.kube/config&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;kubectl apply -f yaml/deployment/gateway-deployment.yaml ‐‐kubeconfig=/root/.kube/config&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">                   </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;kubectl apply -f yaml/svc/config-svc.yaml ‐‐kubeconfig=/root/.kube/config&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh &#x27;kubectl apply -f yaml/svc/gateway-svc.yaml ‐‐kubeconfig=/root/.kube/config&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/4e7686f3a10ecb73c4f6add77a6c28152bb6655c.png" alt="image-20230829230303662"> </p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/98c6c0e869915c7a98d9b6da673e381feb082665.png" alt="image-20230829223135780"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/52a5f06887c3077ee8d7f4d229debdaf6b055d37.png" alt="image-20230829223212112"> </p>
<ol>
<li>测试推送</li>
</ol>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/0a353a5e30e9caa46fed445c9c15adc94d42119e.png" alt="image-20230829223042268"></p>
<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/2658965a5ced07cf1a5c6fefacfd9baeae855f7f.png" alt="image-20230829223646362"></p>
</li>
</ol>
<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# curl `kubectl get endpoints -n springcloud gateway | grep -v AGE| awk &#x27;&#123;print $2&#125;&#x27;`</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;htmL&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=1150, user-scalable=no&quot;&gt;</span><br><span class="line">    &lt;title&gt;Piggy Metrics&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/launch.css&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/style.css&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/animation.css&quot;&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #bubble, #indicator, #save, #piggyicon, #rublesign, .arrowup, .arrowdown, .incomes-sprite-title, .close-sign, .modal-save-icon,</span><br><span class="line">        #modaldeletecross, .initicons-arrow, .expenses-sprite-title, .savings-sprite-title, .triangle, .noUi-handle, .noUi-handle:after  &#123;</span><br><span class="line">            background-image: url(&quot;images/sprites.png&quot;);</span><br><span class="line">            background-size: 538px 84px;</span><br><span class="line">        &#125;</span><br><span class="line">        @media only screen and (-webkit-min-device-pixel-ratio: 1.5),</span><br><span class="line">        only screen and (min-resolution: 144dpi) &#123;</span><br><span class="line">            #bubble, #indicator, #save, #piggyicon, #rublesign, .arrowup, .arrowdown, .incomes-sprite-title, .close-sign, .modal-save-icon,</span><br><span class="line">            #modaldeletecross, .initicons-arrow, .expenses-sprite-title, .savings-sprite-title, .triangle, .noUi-handle, .noUi-handle:after &#123;</span><br><span class="line">                background-image: url(&quot;images/sprites@2x.png&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div id=&quot;settings_hat&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div id=&quot;lastlogo&quot;&gt;</span><br><span class="line">            &lt;div id=&quot;lastlogoflipper&quot;&gt;</span><br><span class="line">                &lt;div id=&quot;logo_settings&quot;&gt;</span><br><span class="line">                    &lt;div id=&quot;logoclickplace&quot;&gt;&lt;/div&gt;&lt;div id=&quot;bubble&quot;&gt;&lt;div id=&quot;indicator&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div id=&quot;logo_statistic&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;section class=&quot;toppage&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- GREETING PAGE --&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div id=&quot;logo_greeting&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div id=&quot;centerbox&quot;&gt;</span><br><span class="line">                &lt;div id=&quot;avatarcontainer&quot; class=&quot;forward plus&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;avatar&quot;&gt;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div id=&quot;lefttitle&quot;&gt;&lt;span class=&quot;bluetext&quot;&gt; metrics&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div id=&quot;righttitle&quot;&gt;&lt;span class=&quot;bluetext&quot;&gt;last seen: &lt;/span&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div id=&quot;bottombuttons&quot;&gt;</span><br><span class="line">                &lt;div id=&quot;plus&quot; class=&quot;plus&quot;&gt;</span><br><span class="line">                    &lt;div id=&quot;plusborder&quot;&gt;</span><br><span class="line">                        &lt;div id=&quot;plusone&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;plustwo&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;plustext&quot;&gt;Get in&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;form id=&quot;logout&quot; autocomplete=&quot;off&quot;&gt;</span><br><span class="line">                    &lt;div id=&quot;minus&quot;&gt;</span><br><span class="line">                        &lt;div id=&quot;minusborder&quot;&gt;</span><br><span class="line">                            &lt;div id=&quot;minusone&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;minustext&quot;&gt;Log out&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- SETTINGS PAGE --&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div id=&quot;settingspage&quot;&gt;</span><br><span class="line">                &lt;div id=&quot;swipefield&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div id=&quot;incomes&quot; class=&quot;columns&quot;&gt;&lt;div class=&quot;incomes-sprite-title zoomplus incomebutton&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;noincomes&quot; class=&quot;incomebutton&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;hoverplace&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div class=&quot;majorplusitem&quot;&gt;</span><br><span class="line">                            &lt;div class=&quot;plusitemborder&quot;&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;div class=&quot;plusitemone&quot;&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;div class=&quot;plusitemtwo&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;span class=&quot;plusitemtitle&quot;&gt;Add income&lt;/span&gt;</span><br><span class="line">                        &lt;span class=&quot;plusitemitalic&quot;&gt;Empty space&lt;/span&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;plusitem&quot; id=&quot;incomesplusitem&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;plusitemborder incomebutton&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div class=&quot;plusitemone&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div class=&quot;plusitemtwo&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;blueline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;brownline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;incomedown&quot;&gt;&lt;div class=&quot;arrowup&quot;&gt;&lt;/div&gt;forth&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;incomeup&quot;&gt;&lt;div class=&quot;arrowdown&quot;&gt;&lt;/div&gt;back&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;frame&quot;&gt;</span><br><span class="line">                        &lt;div id=&quot;incomewrapper&quot; class=&quot;wrapper&quot;&gt;</span><br><span class="line">                            &lt;div id=&quot;incomeslider&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div id=&quot;expenses&quot; class=&quot;columns&quot;&gt;&lt;div class=&quot;expenses-sprite-title zoomplus expensebutton&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;noexpenses&quot; class=&quot;expensebutton&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;hoverplace&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div class=&quot;majorplusitem&quot;&gt;</span><br><span class="line">                            &lt;div class=&quot;plusitemborder expensebutton&quot;&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;div class=&quot;plusitemone&quot;&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;div class=&quot;plusitemtwo&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;span class=&quot;plusitemtitle&quot;&gt;Add expense&lt;/span&gt;</span><br><span class="line">                        &lt;span class=&quot;plusitemitalic&quot;&gt;Empty space&lt;/span&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;plusitem&quot; id=&quot;expensesplusitem&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;plusitemborder&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div class=&quot;plusitemone&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div class=&quot;plusitemtwo&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;blueline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;brownline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;expensedown&quot;&gt;&lt;div class=&quot;arrowup&quot;&gt;&lt;/div&gt;forth&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;expenseup&quot;&gt;&lt;div class=&quot;arrowdown&quot;&gt;&lt;/div&gt;back&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;frame&quot;&gt;</span><br><span class="line">                        &lt;div id=&quot;expensewrapper&quot; class=&quot;wrapper&quot;&gt;</span><br><span class="line">                            &lt;div id=&quot;expenseslider&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div id=&quot;savings&quot; class=&quot;columns&quot;&gt;&lt;div class=&quot;savings-sprite-title&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;blueline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;brownline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;topsavingsline&quot;&gt;</span><br><span class="line">                        &lt;div id=&quot;piggyicon&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;span class=&quot;savingstitle14&quot;&gt;My spare money&lt;/span&gt;</span><br><span class="line">                        &lt;span class=&quot;savingstitle12&quot;&gt;At the moment&lt;/span&gt;</span><br><span class="line">                        &lt;div id=&quot;rublebox&quot;&gt;&lt;/div&gt;&lt;div id=&quot;rublesign&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;input type=&quot;text&quot; name=&quot;savingsvalue&quot; id=&quot;savingsvalue&quot; data-a-sep=&quot; &quot; data-v-min=&quot;0&quot; data-v-max=&quot;999999999&quot; data-l-zero=&quot;deny&quot; maxlength=&quot;12&quot; autocomplete=&quot;off&quot;&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;bottomsavingsline&quot;&gt;</span><br><span class="line">                        &lt;input type=&quot;checkbox&quot; name=&quot;deposit&quot; id=&quot;deposit&quot;&gt;</span><br><span class="line">                        &lt;label for=&quot;deposit&quot; class=&quot;button&quot;&gt;&lt;/label&gt;</span><br><span class="line">                        &lt;label for=&quot;deposit&quot; class=&quot;savingsdeposit&quot;&gt;Accumulation account&lt;/label&gt;</span><br><span class="line">                        &lt;span class=&quot;savingspercent&quot;&gt;Interest&lt;/span&gt;</span><br><span class="line">                        &lt;input type=&quot;text&quot; name=&quot;percentvalue&quot; id=&quot;percentvalue&quot; data-a-sep=&quot;&quot;  data-v-min=&quot;0.00&quot; data-v-max=&quot;99.99&quot; data-l-zero=&quot;deny&quot; data-a-sign=&quot; %&quot; data-w-empty=&quot;sign&quot; data-p-sign=&quot;s&quot; maxlength=&quot;5&quot; data-a-pad=&quot;false&quot; size=&quot;6&quot; data-a-dec=&quot;.&quot; autocomplete=&quot;off&quot;&gt;</span><br><span class="line">                        &lt;input type=&quot;checkbox&quot; name=&quot;capitalization&quot; id=&quot;capitalization&quot;&gt;</span><br><span class="line">                        &lt;label for=&quot;capitalization&quot; class=&quot;button&quot;&gt;&lt;/label&gt;</span><br><span class="line">                        &lt;label for=&quot;capitalization&quot; class=&quot;savingscapital&quot;&gt;Monthly capitalization&lt;/label&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div id=&quot;savebutton&quot;&gt;&lt;div id=&quot;leftborder&quot;&gt;&lt;/div&gt;&lt;div id=&quot;centerborder&quot;&gt;&lt;/div&gt;&lt;div id=&quot;rightborder&quot;&gt;&lt;/div&gt;&lt;div id=&quot;save&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;form action=&quot;user/save&quot; id=&quot;saveoptions&quot; method=&quot;post&quot; autocomplete=&quot;off&quot;&gt;&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- NOTES WINDOW --&gt;</span><br><span class="line">            &lt;div id=&quot;overlay&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div id=&quot;add-notes&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;modal-content&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;notes-title&quot;&gt;Financial notes&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;modal-close&quot;&gt;&lt;div class=&quot;close-sign&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;notes-save&quot;&gt;&lt;div class=&quot;modal-save-icon&quot;&gt;&lt;/div&gt;&lt;div class=&quot;modal-save-text&quot;&gt;Save changes&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;textarea id=&quot;notes&quot; class=&quot;notes-input&quot; autocomplete=&quot;off&quot; maxlength=&quot;5000&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;!-- MODAL WINDOWS --&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div id=&quot;add-modal&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;modal-content&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;modal-title mainmodaltitle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;modal-close&quot;&gt;&lt;div class=&quot;close-sign&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;modalvalue&quot; class=&quot;modalvalue&quot; data-a-sep=&quot; &quot; data-v-min=&quot;0&quot; data-v-max=&quot;999999999&quot; data-l-zero=&quot;deny&quot; maxlength=&quot;12&quot; autocomplete=&quot;off&quot; value=&quot;0&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;modalselects&quot;&gt;</span><br><span class="line">                        &lt;select class=&quot;modalcurrency&quot;&gt;</span><br><span class="line">                            &lt;option value=&quot;RUB&quot;&gt;rubles&lt;/option&gt;</span><br><span class="line">                            &lt;option selected=&quot;selected&quot; value=&quot;USD&quot;&gt;dollars&lt;/option&gt;</span><br><span class="line">                            &lt;option value=&quot;EUR&quot;&gt;euro&lt;/option&gt;</span><br><span class="line">                        &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;select class=&quot;modalperiod&quot;&gt;</span><br><span class="line">                            &lt;option value=&quot;YEAR&quot;&gt;Per year&lt;/option&gt;</span><br><span class="line">                            &lt;option value=&quot;QUARTER&quot;&gt;Per quarter&lt;/option&gt;</span><br><span class="line">                            &lt;option selected=&quot;selected&quot; value=&quot;MONTH&quot;&gt;Per month&lt;/option&gt;</span><br><span class="line">                            &lt;option value=&quot;DAY&quot;&gt;Per day&lt;/option&gt;</span><br><span class="line">                            &lt;option value=&quot;HOUR&quot;&gt;Per hour&lt;/option&gt;</span><br><span class="line">                        &lt;/select&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;initicons&quot;&gt;&lt;div id=&quot;chooseicon&quot; class=&quot;cart-icon&quot;&gt;&lt;/div&gt;&lt;div class=&quot;initicons-arrow&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;input class=&quot;modaltitle&quot; placeholder=&quot;Title&quot; type=&quot;text&quot; autocomplete=&quot;off&quot; maxlength=&quot;18&quot;/&gt;</span><br><span class="line">                    &lt;div class=&quot;modal-save&quot;&gt;&lt;div class=&quot;modal-save-icon&quot;&gt;&lt;/div&gt;&lt;div class=&quot;modal-save-text&quot;&gt;Save changes&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;modal-delete&quot;&gt;&lt;div id=&quot;modaldeletecross&quot;&gt;&lt;/div&gt;&lt;div class=&quot;modal-delete-text&quot;&gt;Remove&lt;/div&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!-- Expenses table --&gt;</span><br><span class="line">                    &lt;div class=&quot;modalexpensessurface&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;modal-title&quot;&gt;Choose an icon&lt;/div&gt;</span><br><span class="line">                        &lt;table class=&quot;modaltable modalforward&quot; id=&quot;modalexpensetable&quot;&gt;</span><br><span class="line">                            &lt;tr&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox auto&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox gas&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox home&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox baby&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;/tr&gt;</span><br><span class="line">                            &lt;tr&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox cart&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox clothes&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox phone&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox utilities&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;/tr&gt;</span><br><span class="line">                            &lt;tr&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox island&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox earth&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox meal&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox sport&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;/tr&gt;</span><br><span class="line">                            &lt;tr&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox medical&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox tv&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox smoking&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox other&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;/tr&gt;</span><br><span class="line">                        &lt;/table&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!-- Incomes table --&gt;</span><br><span class="line">                    &lt;div class=&quot;modalincomessurface&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;modal-title&quot;&gt;Choose an icon&lt;/div&gt;</span><br><span class="line">                        &lt;table class=&quot;modaltable modalforward&quot; id=&quot;modalincomestable&quot;&gt;</span><br><span class="line">                            &lt;tr&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox edu&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox graphs&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox wallet&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox case&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;/tr&gt;</span><br><span class="line">                            &lt;tr&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox rub&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox euro&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox doll&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                                &lt;td&gt;&lt;div class=&quot;imgbox&quot;&gt;&lt;div class=&quot;iconbox gbp&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/td&gt;</span><br><span class="line">                            &lt;/tr&gt;</span><br><span class="line">                        &lt;/table&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- LAST PAGE --&gt;</span><br><span class="line">        &lt;section class=&quot;bottompage&quot;&gt;</span><br><span class="line">            &lt;div id=&quot;mainblock&quot;&gt;</span><br><span class="line">                &lt;div id=&quot;setcurrency&quot;&gt;</span><br><span class="line">                    &lt;div id=&quot;usdcurr&quot; class=&quot;currunchecked&quot;&gt;Usd&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;eurcurr&quot; class=&quot;currunchecked&quot;&gt;Eur&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;rubcurr&quot; class=&quot;currunchecked&quot;&gt;Rub&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div id=&quot;expense-cursor&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;cursorline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;cursorpoint&quot;&gt;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div id=&quot;incomes-cursor&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;cursorline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;cursorpoint&quot;&gt;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div id=&quot;expenses-lines-container&quot;&gt;&lt;/div&gt;</span><br><span class="line">                &lt;div id=&quot;incomes-lines-container&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div id=&quot;deltatitle&quot; class=&quot;flag&quot;&gt;Incomes &amp;mdash; expenses&lt;div class=&quot;triangle&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                &lt;div id=&quot;savingstitle&quot; class=&quot;flag&quot;&gt;Savings&lt;div class=&quot;triangle&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div id=&quot;outermaindiv&quot;&gt; &lt;div class=&quot;linesbackground&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;outermaincursordiv&quot;&gt; &lt;input class=&quot;knob&quot; id=&quot;outer-circle-cursor&quot;/&gt; &lt;/div&gt;</span><br><span class="line">                    &lt;input class=&quot;knob&quot; id=&quot;outer-circle&quot;/&gt;</span><br><span class="line">                    &lt;div class=&quot;topmaincircletitle lightcircletitle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;outer-circle-value&quot; class=&quot;boldcircletitle&quot;&gt;&lt;/div&gt;&lt;/span&gt;</span><br><span class="line">                    &lt;div class=&quot;bottommaincircletitle&quot;&gt;&lt;span class=&quot;boldcircletitle curr&quot;&gt;&lt;/span&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;/ Month&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;innermaindiv&quot;&gt; &lt;input class=&quot;knob&quot; id=&quot;inner-circle&quot;/&gt; &lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;maincircleline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;maincircle100percent&quot;&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;100%&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;outer-circle-percent&quot;&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div id=&quot;small-circles-container&quot;&gt;</span><br><span class="line">                    &lt;div id=&quot;firstcirclediv&quot;&gt;</span><br><span class="line">                        &lt;div id=&quot;firstcircledivflipper&quot;&gt;</span><br><span class="line">                            &lt;div class=&quot;frontcircle&quot;&gt; &lt;div class=&quot;linesbackground&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;input class=&quot;knob&quot; id=&quot;first-circle&quot; /&gt;</span><br><span class="line">                                &lt;div class=&quot;cursordiv&quot;&gt; &lt;input class=&quot;knob&quot; id=&quot;first-circle-cursor&quot;/&gt; &lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;first-circle-title&quot; class=&quot;circletoptitle lightcircletitle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;first-circle-value&quot; class=&quot;circlevalue boldcircletitle&quot;&gt;&lt;/div&gt;&lt;/span&gt;</span><br><span class="line">                                &lt;div class=&quot;bottomcircletitle&quot;&gt;&lt;span class=&quot;boldcircletitle curr&quot;&gt;&lt;/span&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;/ Hour&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;first-circle-percent&quot;&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;circleline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;circle100percent&quot;&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;100%&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                            &lt;div class=&quot;backcircle&quot;&gt;</span><br><span class="line">                                &lt;canvas id=&quot;movingcircle-1&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">                                &lt;div class=&quot;circletoptitle lightcircletitle&quot;&gt;Choose any&lt;br&gt;item&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;circlesselect&quot;&gt;</span><br><span class="line">                                    &lt;select id=&quot;circle-select-1&quot; class=&quot;selectcircles&quot;&gt;&lt;/select&gt;</span><br><span class="line">                                &lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;circle-select-1-back&quot;&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;div id=&quot;secondcirclediv&quot;&gt;</span><br><span class="line">                        &lt;div id=&quot;secondcircledivflipper&quot;&gt;</span><br><span class="line">                            &lt;div class=&quot;frontcircle&quot;&gt; &lt;div class=&quot;linesbackground&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;input class=&quot;knob&quot; id=&quot;second-circle&quot; /&gt;</span><br><span class="line">                                &lt;div class=&quot;cursordiv&quot;&gt; &lt;input class=&quot;knob&quot; id=&quot;second-circle-cursor&quot;/&gt; &lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;second-circle-title&quot; class=&quot;circletoptitle lightcircletitle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;second-circle-value&quot; class=&quot;circlevalue boldcircletitle&quot;&gt;&lt;/div&gt;&lt;/span&gt;</span><br><span class="line">                                &lt;div class=&quot;bottomcircletitle&quot;&gt;&lt;span class=&quot;boldcircletitle curr&quot;&gt;&lt;/span&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;/ Day&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;second-circle-percent&quot;&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;circleline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;circle100percent&quot;&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;100%&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                            &lt;div class=&quot;backcircle&quot;&gt;</span><br><span class="line">                                &lt;canvas id=&quot;movingcircle-2&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">                                &lt;div class=&quot;circletoptitle lightcircletitle&quot;&gt;Choose any&lt;br&gt;item&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;circlesselect&quot;&gt;</span><br><span class="line">                                    &lt;select id=&quot;circle-select-2&quot; class=&quot;selectcircles&quot;&gt;&lt;/select&gt;</span><br><span class="line">                                &lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;circle-select-2-back&quot;&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;div id=&quot;thirdcirclediv&quot;&gt;</span><br><span class="line">                        &lt;div id=&quot;thirdcircledivflipper&quot;&gt;</span><br><span class="line">                            &lt;div class=&quot;frontcircle&quot;&gt; &lt;div class=&quot;linesbackground&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;cursordiv&quot;&gt; &lt;input class=&quot;knob&quot; id=&quot;third-circle-cursor&quot;/&gt; &lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;third-circle-title&quot; class=&quot;circletoptitle lightcircletitle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;third-circle-value&quot; class=&quot;circlevalue boldcircletitle&quot;&gt;&lt;/div&gt;&lt;/span&gt;</span><br><span class="line">                                &lt;div class=&quot;bottomcircletitle&quot;&gt;&lt;span class=&quot;boldcircletitle curr&quot;&gt;&lt;/span&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;/ Year&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;third-circle-percent&quot;&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;circleline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;circle100percent&quot;&gt;&lt;span class=&quot;lightcircletitle&quot;&gt;100%&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;input class=&quot;knob&quot; id=&quot;third-circle&quot; /&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                            &lt;div class=&quot;backcircle&quot;&gt;</span><br><span class="line">                                &lt;canvas id=&quot;movingcircle-3&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">                                &lt;div class=&quot;circletoptitle lightcircletitle&quot;&gt;Choose any&lt;br&gt;item&lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;circlesselect&quot;&gt;</span><br><span class="line">                                    &lt;select id=&quot;circle-select-3&quot; class=&quot;selectcircles&quot;&gt;&lt;/select&gt;</span><br><span class="line">                                &lt;/div&gt;</span><br><span class="line">                                &lt;div id=&quot;circle-select-3-back&quot;&gt;&lt;/div&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;firstpendant&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;pendant-circle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;span class=&quot;lightcircletitle pendantfont&quot;&gt;Per hour&lt;/span&gt;</span><br><span class="line">                        &lt;div class=&quot;pendantline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;secondpendant&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;pendant-circle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;span class=&quot;lightcircletitle pendantfont&quot;&gt;Per day&lt;/span&gt;</span><br><span class="line">                        &lt;div class=&quot;pendantline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;thirdpendant&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;pendant-circle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;span class=&quot;lightcircletitle pendantfont&quot;&gt;Per year&lt;/span&gt;</span><br><span class="line">                        &lt;div class=&quot;pendantline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div id=&quot;savings-slider-container&quot;&gt;</span><br><span class="line">                    &lt;span class=&quot;savings-slider&quot;&gt;part of the spare money which you&#x27;ll send to accumulation account every month:&lt;/span&gt;</span><br><span class="line">                    &lt;div id=&quot;savings-slider&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;savingsTip0&quot;&gt;Without monthly deposit refill&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;savingsTip100&quot;&gt;All savings go to deposit every month&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div id=&quot;savingscircles&quot;&gt;</span><br><span class="line">                    &lt;div id=&quot;after-savings&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;savings-circle-title lightcircletitle&quot;&gt;In a year&lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;after-savings-value&quot; class=&quot;boldcircletitle&quot;&gt;&lt;/div&gt;&lt;/span&gt;</span><br><span class="line">                        &lt;div class=&quot;savings-circle-currency boldcircletitle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;before-savings&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;savings-circle-title lightcircletitle&quot;&gt;At the moment&lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;before-savings-value&quot; class=&quot;boldcircletitle&quot;&gt;&lt;/div&gt;&lt;/span&gt;</span><br><span class="line">                        &lt;div class=&quot;savings-circle-currency boldcircletitle&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div id=&quot;savingschart&quot;&gt;</span><br><span class="line">                    &lt;canvas id=&quot;horizontal&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">                    &lt;canvas id=&quot;chartline&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">                    &lt;div id=&quot;month0&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month1&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month2&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month3&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month4&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month5&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month6&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;large-month-circle&quot;&gt;&lt;div class=&quot;bluedot&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;large-month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month7&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month8&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month9&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month10&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month11&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;months&quot;&gt;&lt;div id=&quot;month12&quot; class=&quot;in-month&quot;&gt;&lt;div class=&quot;small-month-circle&quot;&gt;&lt;/div&gt;&lt;div class=&quot;large-month-circle&quot;&gt;&lt;div class=&quot;bluedot&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;month-name&quot;&gt;&lt;/div&gt;&lt;div class=&quot;large-month-val&quot;&gt;&lt;span class=&quot;val&quot;&gt;&lt;/span&gt; &lt;span class=&quot;curr&quot;&gt;&lt;/div&gt;&lt;div class=&quot;month-val&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">        &lt;section id=&quot;loginpage&quot;&gt;</span><br><span class="line">            &lt;div id=&quot;flipper&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;FRONTCARD&quot;&gt;</span><br><span class="line">                    &lt;div id=&quot;piggy&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;logotext&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;flipinfo&quot; id=&quot;info&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;secondenter&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;preloader&quot;&gt;&lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;wrapper&quot;&gt;</span><br><span class="line">                        &lt;!-- LOG IN FORMS --&gt;</span><br><span class="line">                        &lt;div id=&quot;cube&quot;&gt;</span><br><span class="line">                            &lt;form action=&quot;user/login&quot; id=&quot;auth&quot; method=&quot;post&quot; autocomplete=&quot;off&quot;&gt;</span><br><span class="line">                                &lt;div class=&quot;side&quot; id=&quot;side1&quot;&gt;</span><br><span class="line">                                    &lt;div id=&quot;backlogin&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                    &lt;div id=&quot;enter&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                    &lt;input class=&quot;frontforms&quot; id=&quot;frontloginform&quot; name=&quot;username&quot; placeholder=&quot;enter your login&quot; type=&quot;text&quot; autocomplete=&quot;off&quot;/&gt;</span><br><span class="line">                                &lt;/div&gt;</span><br><span class="line">                                &lt;div class=&quot;side&quot; id=&quot;side2&quot;&gt;</span><br><span class="line">                                    &lt;div id=&quot;backpassword&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                    &lt;input class=&quot;frontforms&quot; id=&quot;frontpasswordform&quot; name=&quot;password&quot; placeholder=&quot;password&quot; type=&quot;password&quot; autocomplete=&quot;off&quot;/&gt;</span><br><span class="line">                                &lt;/div&gt;</span><br><span class="line">                            &lt;/form&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;fliptext&quot;&gt;Or &lt;a href=&quot;#&quot;&gt;create new account&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">                &lt;div class=&quot;BACKCARD&quot;&gt;</span><br><span class="line">                    &lt;div id=&quot;infopage&quot;&gt;</span><br><span class="line">                        &lt;span class=&quot;frominfo&quot; id=&quot;infosubtitle&quot;&gt;Piggy Metrics is the new simple way to deal with personal finances&lt;/span&gt;</span><br><span class="line">                        &lt;span class=&quot;frominfo&quot; id=&quot;infotitle&quot;&gt;This is how it works&lt;/span&gt;</span><br><span class="line">                        &lt;div class=&quot;infoflipback frominfo&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;infoleft&quot; class=&quot;infocolumn frominfo&quot;&gt;</span><br><span class="line">                            &lt;div id=&quot;leftcolumn&quot;&gt;enter planned periodic&lt;br&gt;incomes and expenses&lt;br&gt;</span><br><span class="line">                                &lt;div class=&quot;columnimage&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;span class=&quot;columnfooter&quot;&gt;Plan or estimate your regular expenses. Divide them into categories. Сomponents of your budget&lt;br&gt;will always be near to hand&lt;/span&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;infocenter&quot;class=&quot; infocolumn frominfo&quot;&gt;</span><br><span class="line">                            &lt;div id=&quot;centercolumn&quot;&gt;check all your savings&lt;br&gt;at the moment&lt;br&gt;</span><br><span class="line">                                &lt;div class=&quot;columnimage&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;span class=&quot;columnfooter&quot;&gt;Regularly update the value of your savings.&lt;br&gt;Follow the progress.&lt;/span&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;inforight&quot;class=&quot;infocolumn frominfo&quot;&gt;</span><br><span class="line">                            &lt;div id=&quot;rightcolumn&quot;&gt;analyze financial statistics&lt;br&gt;and forecasts&lt;br&gt;</span><br><span class="line">                                &lt;div class=&quot;columnimage&quot;&gt;&lt;/div&gt;</span><br><span class="line">                                &lt;span class=&quot;columnfooter&quot;&gt;Based on this information, you’ll get statistics for your budget and forecast of savings&lt;br&gt;for the year ahead&lt;/span&gt;</span><br><span class="line">                            &lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;infoline&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;infolinetext&quot; class=&quot;frominfo&quot;&gt;Try without registration&lt;/div&gt;</span><br><span class="line">                        &lt;button class=&quot;demobutton&quot;&gt;Demo account&lt;/button&gt;</span><br><span class="line">                        &lt;a id=&quot;infofooter&quot; href=&quot;https://github.com/sqshq/PiggyMetrics&quot;&gt;&amp;copy; 2016 sqshq.com&lt;/a&gt;</span><br><span class="line">                        &lt;a id=&quot;iconsfooter&quot; href=&quot;attribution.html&quot;&gt;icons attribution&lt;/a&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div id=&quot;regpage&quot;&gt;</span><br><span class="line">                        &lt;div id=&quot;franklin&quot;&gt;</span><br><span class="line">                            &lt;div class=&quot;avatar&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;createaccount&quot;&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div class=&quot;fliptext&quot;&gt;Or &lt;a href=&quot;#&quot;&gt;use existing account&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;registrationforms&quot;&gt;</span><br><span class="line">                            &lt;form id=&quot;signup&quot; autocomplete=&quot;off&quot;&gt;</span><br><span class="line">                                &lt;input class=&quot;backforms&quot; name=&quot;reg_user_name&quot; id=&quot;backloginform&quot; placeholder=&quot; enter a login&quot; type=&quot;text&quot;/&gt;&lt;br&gt;</span><br><span class="line">                                &lt;input class=&quot;backforms&quot; name=&quot;reg_user_password&quot; id=&quot;backpasswordform&quot; placeholder=&quot; password&quot; type=&quot;password&quot;/&gt;</span><br><span class="line">                                &lt;button class=&quot;regbutton&quot; type=&quot;submit&quot; name=&quot;registration&quot;&gt;r e g i s t e r&lt;/button&gt;</span><br><span class="line">                            &lt;/form&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                        &lt;div id=&quot;mailform&quot;&gt;</span><br><span class="line">                            &lt;form id=&quot;mail&quot; autocomplete=&quot;off&quot;&gt;</span><br><span class="line">                                &lt;input name=&quot;usermail&quot; id=&quot;backmailform&quot; placeholder=&quot;e-mail address&quot; type=&quot;text&quot;/&gt;&lt;br&gt;</span><br><span class="line">                                &lt;button class=&quot;mailbutton&quot; type=&quot;submit&quot; name=&quot;mailbutton&quot;&gt;Subscribe to notifications&lt;/button&gt;</span><br><span class="line">                            &lt;/form&gt;</span><br><span class="line">                            &lt;span class=&quot;mailforminfo&quot;&gt;Thank you for registration.&lt;br&gt;</span><br><span class="line">                                &lt;span class=&quot;mailforminfosmall&quot;&gt;</span><br><span class="line">                                    We suggest you to enter an e-mail address so we can occasionally remind you about the service. Continuous tracking your budget statistics might be especially effective.</span><br><span class="line">                                &lt;/span&gt;</span><br><span class="line">                            &lt;/span&gt;</span><br><span class="line">                            &lt;div id=&quot;skipmail&quot;&gt;&lt;a href=&quot;#&quot;&gt;Skip this step&lt;/a&gt;&lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line"></span><br><span class="line">        &lt;script src=&quot;js/lib/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=&quot;js/lib/touchscreens.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=&quot;js/lib/extrascripts.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">        &lt;script src=&quot;js/dashboard.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=&quot;js/main.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=&quot;js/login.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script src=&quot;js/launch.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;[root@master ~]# </span><br></pre></td></tr></table></figure>

<p><img src="https://picturebed.yunyize.com:8000/pic/6c3ae151d40c97dbd8a7eaa660021bca9d2fdf79/81bd35c12d2c6dac6928f0c48305a2c9163b051d.png" alt="image-20230829192026199"></p>
<h4 id="12-服务网格-创建DestinationRule-2分"><a href="#12-服务网格-创建DestinationRule-2分" class="headerlink" title="12. 服务网格: 创建DestinationRule (2分)"></a>12. 服务网格: 创建DestinationRule (2分)</h4><p>将Bookinfo(在kubernetes镜像中的project目录下，project&#x2F;listio&#x2F;istio-1.17.2&#x2F;services&#x2F;bookinfo.yaml)应用部署到default命名空间下，为Bookinfo应用的四个微服务设置默认目标规则，名称分别为productpage、reviews、 ratings和details。定义好可用的版本，productpage服务可用的版本为v1，reviews服务可用的版本为v1、v2、v3，ratings服务可用的版本为v1、v2,details服务可用的版本为v1、v2。</p>
<p>将 <code>kubectl get destinationrule reviews -o jsonpath=&#123;$.spec.subsets&#125;</code> 命令的返回结果提交至答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 删除验证配置</span><br><span class="line">kubectl delete validatingwebhookconfiguration istiod-default-validator </span><br><span class="line"></span><br><span class="line"># 编写服务网格</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/DestinationRule.yaml</span><br><span class="line">apiVersion: networking.istio.io/v1alpha3</span><br><span class="line">kind: DestinationRule</span><br><span class="line">metadata:</span><br><span class="line">  name: productpage</span><br><span class="line">spec:</span><br><span class="line">  host: productpage</span><br><span class="line">  subsets:</span><br><span class="line">  - name: v1</span><br><span class="line">    labels:</span><br><span class="line">      version: v1</span><br><span class="line">---</span><br><span class="line">apiVersion: networking.istio.io/v1alpha3</span><br><span class="line">kind: DestinationRule</span><br><span class="line">metadata:</span><br><span class="line">  name: reviews</span><br><span class="line">spec:</span><br><span class="line">  host: reviews</span><br><span class="line">  subsets:</span><br><span class="line">  - name: v1</span><br><span class="line">    labels:</span><br><span class="line">      version: v1</span><br><span class="line">  - name: v2</span><br><span class="line">    labels:</span><br><span class="line">      version: v2</span><br><span class="line">  - name: v3</span><br><span class="line">    labels:</span><br><span class="line">      version: v3</span><br><span class="line">---</span><br><span class="line">apiVersion: networking.istio.io/v1alpha3</span><br><span class="line">kind: DestinationRule</span><br><span class="line">metadata:</span><br><span class="line">  name: ratings</span><br><span class="line">spec:</span><br><span class="line">  host: ratings</span><br><span class="line">  subsets:</span><br><span class="line">  - name: v1</span><br><span class="line">    labels:</span><br><span class="line">      version: v1</span><br><span class="line">  - name: v2</span><br><span class="line">    labels:</span><br><span class="line">      version: v2</span><br><span class="line">---</span><br><span class="line">apiVersion: networking.istio.io/v1alpha3</span><br><span class="line">kind: DestinationRule</span><br><span class="line">metadata:</span><br><span class="line">  name: details</span><br><span class="line">spec:</span><br><span class="line">  host: details</span><br><span class="line">  subsets:</span><br><span class="line">  - name: v1</span><br><span class="line">    labels:</span><br><span class="line">      version: v1</span><br><span class="line">  - name: v2</span><br><span class="line">    labels:</span><br><span class="line">      version: v2</span><br><span class="line">---</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 部署</span><br><span class="line">kubectl apply -f DestinationRule.yaml</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get destinationrule reviews -o jsonpath=&#123;$.spec.subsets&#125;</span><br><span class="line">[&#123;&quot;labels&quot;:&#123;&quot;version&quot;:&quot;v1&quot;&#125;,&quot;name&quot;:&quot;v1&quot;&#125;,&#123;&quot;labels&quot;:&#123;&quot;version&quot;:&quot;v2&quot;&#125;,&quot;name&quot;:&quot;v2&quot;&#125;,&#123;&quot;labels&quot;:&#123;&quot;version&quot;:&quot;v3&quot;&#125;,&quot;name&quot;:&quot;v3&quot;&#125;][root@master ~]# </span><br></pre></td></tr></table></figure>

<h4 id="13-KubeVirt运维-创建VM-2分"><a href="#13-KubeVirt运维-创建VM-2分" class="headerlink" title="13. KubeVirt运维: 创建VM (2分)"></a>13. KubeVirt运维: 创建VM (2分)</h4><p>使用提供的镜像(images&#x2F;fedora-virt_v1.0.tar)在default命名空间下创建一台VM，名称为test-vm，内存大小为1Gi，磁盘驱动:virtio，运行策略: Manual。如果VM出现调度失败的情况，请修改kubevirt配置，让其支持硬件仿真。</p>
<p>将 <code>kubectl describe vm test-vm</code> 命令的返回结果提交到答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 编写KubeVirt的yaml</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/KubeVirt-VM.yaml</span><br><span class="line">apiVersion: kubevirt.io/v1</span><br><span class="line">kind: VirtualMachine</span><br><span class="line">metadata:</span><br><span class="line">  name: test-vm</span><br><span class="line">spec:</span><br><span class="line">  running: false</span><br><span class="line">  template:</span><br><span class="line">    metadata:</span><br><span class="line">      labels:</span><br><span class="line">        kubevirt.io/size: small</span><br><span class="line">    spec:</span><br><span class="line">      domain:</span><br><span class="line">        devices:</span><br><span class="line">          disks:</span><br><span class="line">            - name: rootdisk</span><br><span class="line">              disk:</span><br><span class="line">                bus: virtio</span><br><span class="line">        resources:</span><br><span class="line">          requests:</span><br><span class="line">            memory: 1024M</span><br><span class="line">      volumes:</span><br><span class="line">        - name: rootdisk</span><br><span class="line">          containerDisk:</span><br><span class="line">            image: 192.168.100.2/library/fedora-virt:v1.0</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 加载</span><br><span class="line">kubectl apply -f /root/KubeVirt-VM.yaml</span><br><span class="line"></span><br><span class="line"># 启动vm</span><br><span class="line">virtctl start test-vm</span><br><span class="line"></span><br><span class="line"># 进入vm, 退出使用 ^]</span><br><span class="line">virtctl console test-vm</span><br></pre></td></tr></table></figure>

<p><img src="https://picturebed.yunyize.com:8000/pic/b6186e7052e311ee9ad2ab767987ad93136643fd/f89d129d26afb34851cea330e1bfcc242274bf8e.png" alt="image-20230830092410908"></p>
<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl describe vm test-vm</span><br><span class="line">Name:         test-vm</span><br><span class="line">Namespace:    default</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  kubevirt.io/latest-observed-api-version: v1</span><br><span class="line">              kubevirt.io/storage-observed-api-version: v1alpha3</span><br><span class="line">API Version:  kubevirt.io/v1</span><br><span class="line">Kind:         VirtualMachine</span><br><span class="line">Metadata:</span><br><span class="line">  Creation Timestamp:  2023-08-30T01:22:36Z</span><br><span class="line">  Finalizers:</span><br><span class="line">    kubevirt.io/virtualMachineControllerFinalize</span><br><span class="line">  Generation:  2</span><br><span class="line">  Managed Fields:</span><br><span class="line">    API Version:  kubevirt.io/v1</span><br><span class="line">    Fields Type:  FieldsV1</span><br><span class="line">    fieldsV1:</span><br><span class="line">      f:metadata:</span><br><span class="line">        f:annotations:</span><br><span class="line">          .:</span><br><span class="line">          f:kubectl.kubernetes.io/last-applied-configuration:</span><br><span class="line">      f:spec:</span><br><span class="line">        .:</span><br><span class="line">        f:template:</span><br><span class="line">          .:</span><br><span class="line">          f:metadata:</span><br><span class="line">            .:</span><br><span class="line">            f:labels:</span><br><span class="line">              .:</span><br><span class="line">              f:kubevirt.io/size:</span><br><span class="line">          f:spec:</span><br><span class="line">            .:</span><br><span class="line">            f:domain:</span><br><span class="line">              .:</span><br><span class="line">              f:devices:</span><br><span class="line">                .:</span><br><span class="line">                f:disks:</span><br><span class="line">              f:resources:</span><br><span class="line">                .:</span><br><span class="line">                f:requests:</span><br><span class="line">                  .:</span><br><span class="line">                  f:memory:</span><br><span class="line">            f:volumes:</span><br><span class="line">    Manager:      kubectl-client-side-apply</span><br><span class="line">    Operation:    Update</span><br><span class="line">    Time:         2023-08-30T01:22:36Z</span><br><span class="line">    API Version:  kubevirt.io/v1alpha3</span><br><span class="line">    Fields Type:  FieldsV1</span><br><span class="line">    fieldsV1:</span><br><span class="line">      f:metadata:</span><br><span class="line">        f:annotations:</span><br><span class="line">          f:kubevirt.io/latest-observed-api-version:</span><br><span class="line">          f:kubevirt.io/storage-observed-api-version:</span><br><span class="line">        f:finalizers:</span><br><span class="line">          .:</span><br><span class="line">          v:&quot;kubevirt.io/virtualMachineControllerFinalize&quot;:</span><br><span class="line">      f:spec:</span><br><span class="line">        f:running:</span><br><span class="line">    Manager:      Go-http-client</span><br><span class="line">    Operation:    Update</span><br><span class="line">    Time:         2023-08-30T01:23:01Z</span><br><span class="line">    API Version:  kubevirt.io/v1alpha3</span><br><span class="line">    Fields Type:  FieldsV1</span><br><span class="line">    fieldsV1:</span><br><span class="line">      f:status:</span><br><span class="line">        .:</span><br><span class="line">        f:conditions:</span><br><span class="line">        f:created:</span><br><span class="line">        f:desiredGeneration:</span><br><span class="line">        f:observedGeneration:</span><br><span class="line">        f:printableStatus:</span><br><span class="line">        f:ready:</span><br><span class="line">        f:volumeSnapshotStatuses:</span><br><span class="line">    Manager:         Go-http-client</span><br><span class="line">    Operation:       Update</span><br><span class="line">    Subresource:     status</span><br><span class="line">    Time:            2023-08-30T01:23:10Z</span><br><span class="line">  Resource Version:  584571</span><br><span class="line">  UID:               deb829f4-3f20-4a36-b539-9a36b785a944</span><br><span class="line">Spec:</span><br><span class="line">  Running:  true</span><br><span class="line">  Template:</span><br><span class="line">    Metadata:</span><br><span class="line">      Creation Timestamp:  &lt;nil&gt;</span><br><span class="line">      Labels:</span><br><span class="line">        kubevirt.io/size:  small</span><br><span class="line">    Spec:</span><br><span class="line">      Domain:</span><br><span class="line">        Devices:</span><br><span class="line">          Disks:</span><br><span class="line">            Disk:</span><br><span class="line">              Bus:  virtio</span><br><span class="line">            Name:   rootdisk</span><br><span class="line">        Machine:</span><br><span class="line">          Type:  q35</span><br><span class="line">        Resources:</span><br><span class="line">          Requests:</span><br><span class="line">            Memory:  1024M</span><br><span class="line">      Volumes:</span><br><span class="line">        Container Disk:</span><br><span class="line">          Image:  192.168.100.2/library/fedora-virt:v1.0</span><br><span class="line">        Name:     rootdisk</span><br><span class="line">Status:</span><br><span class="line">  Conditions:</span><br><span class="line">    Last Probe Time:       &lt;nil&gt;</span><br><span class="line">    Last Transition Time:  2023-08-30T01:23:07Z</span><br><span class="line">    Status:                True</span><br><span class="line">    Type:                  Ready</span><br><span class="line">    Last Probe Time:       &lt;nil&gt;</span><br><span class="line">    Last Transition Time:  &lt;nil&gt;</span><br><span class="line">    Message:               cannot migrate VMI which does not use masquerade to connect to the pod network or bridge with kubevirt.io/allow-pod-bridge-network-live-migration VM annotation</span><br><span class="line">    Reason:                InterfaceNotLiveMigratable</span><br><span class="line">    Status:                False</span><br><span class="line">    Type:                  LiveMigratable</span><br><span class="line">  Created:                 true</span><br><span class="line">  Desired Generation:      2</span><br><span class="line">  Observed Generation:     2</span><br><span class="line">  Printable Status:        Running</span><br><span class="line">  Ready:                   true</span><br><span class="line">  Volume Snapshot Statuses:</span><br><span class="line">    Enabled:  false</span><br><span class="line">    Name:     rootdisk</span><br><span class="line">    Reason:   Snapshot is not supported for this volumeSource type [rootdisk]</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason            Age    From                       Message</span><br><span class="line">  ----    ------            ----   ----                       -------</span><br><span class="line">  Normal  SuccessfulCreate  3m30s  virtualmachine-controller  Started the virtual machine by creating the new virtual machine instance test-vm</span><br><span class="line">[root@master ~]# </span><br></pre></td></tr></table></figure>

<h4 id="14-PV卷管理-创建PV卷-2分"><a href="#14-PV卷管理-创建PV卷-2分" class="headerlink" title="14. PV卷管理: 创建PV卷(2分)"></a>14. PV卷管理: 创建PV卷(2分)</h4><p>创建一个pv，名字为 app-config，大小为2Gi，访问权限为ReadWriteMany。Volume的类型为hostPath，路径为&#x2F;srv&#x2F;app-config。</p>
<p>创建完成后,将kubectl describe pv命令的返回结果提交至答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 创建pv文件夹</span><br><span class="line">mkdir /srv/app-config</span><br><span class="line"></span><br><span class="line"># 编写pv的yaml</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/pv-app-config.yaml </span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: PersistentVolume</span><br><span class="line">metadata:</span><br><span class="line">  name:  app-config</span><br><span class="line">spec:</span><br><span class="line">  capacity:</span><br><span class="line">    storage: 2Gi</span><br><span class="line">  accessModes:</span><br><span class="line">    - ReadWriteMany</span><br><span class="line">  hostPath:</span><br><span class="line">    path: &quot;/srv/app-config&quot;</span><br><span class="line">    </span><br><span class="line"># 应用</span><br><span class="line">kubectl apply -f /root/pv-app-config.yaml </span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl describe pv</span><br><span class="line">Name:            app-config</span><br><span class="line">Labels:          &lt;none&gt;</span><br><span class="line">Annotations:     &lt;none&gt;</span><br><span class="line">Finalizers:      [kubernetes.io/pv-protection]</span><br><span class="line">StorageClass:    </span><br><span class="line">Status:          Available</span><br><span class="line">Claim:           </span><br><span class="line">Reclaim Policy:  Retain</span><br><span class="line">Access Modes:    RWX</span><br><span class="line">VolumeMode:      Filesystem</span><br><span class="line">Capacity:        2Gi</span><br><span class="line">Node Affinity:   &lt;none&gt;</span><br><span class="line">Message:         </span><br><span class="line">Source:</span><br><span class="line">    Type:          HostPath (bare host directory volume)</span><br><span class="line">    Path:          /srv/app-config</span><br><span class="line">    HostPathType:  </span><br><span class="line">Events:            &lt;none&gt;</span><br><span class="line">[root@master ~]# </span><br></pre></td></tr></table></figure>

<h4 id="15-Ingress资源管理-创建lngress-2分"><a href="#15-Ingress资源管理-创建lngress-2分" class="headerlink" title="15.Ingress资源管理:创建lngress (2分)"></a>15.Ingress资源管理:创建lngress (2分)</h4><p>创建一个新的nginx Ingress资源:</p>
<ol>
<li>名称: pong</li>
<li>Namespace: ing-internal</li>
<li>使用服务端口5678在路径 &#x2F;hello 上公开服务hello</li>
</ol>
<p>将<code>kubectl describe ingress -n ing-internal</code>命令的返回结果提交到答题框。</p>
<p><strong>operating:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># master</span><br><span class="line"># 编写yaml</span><br><span class="line">cat &lt;&lt; EOF &gt; /root/Ingress-nginx-pong.yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Namespace</span><br><span class="line">metadata:</span><br><span class="line">  name: ing-internal</span><br><span class="line">---</span><br><span class="line">apiVersion: networking.k8s.io/v1</span><br><span class="line">kind: Ingress</span><br><span class="line">metadata:</span><br><span class="line">  name: pong</span><br><span class="line">  namespace: ing-internal</span><br><span class="line">spec:</span><br><span class="line">  rules:</span><br><span class="line">  - http:</span><br><span class="line">      paths:</span><br><span class="line">      - path: /hello</span><br><span class="line">        pathType: Prefix</span><br><span class="line">        backend:</span><br><span class="line">          service:</span><br><span class="line">            name: hello</span><br><span class="line">            port:</span><br><span class="line">              number: 5678</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line"># 应用Ingress</span><br><span class="line">kubectl apply -f /root/Ingress-nginx-pong.yaml</span><br></pre></td></tr></table></figure>

<p><strong>answer:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl describe ingress -n ing-internal</span><br><span class="line">Name:             pong</span><br><span class="line">Labels:           &lt;none&gt;</span><br><span class="line">Namespace:        ing-internal</span><br><span class="line">Address:          </span><br><span class="line">Ingress Class:    &lt;none&gt;</span><br><span class="line">Default backend:  &lt;default&gt;</span><br><span class="line">Rules:</span><br><span class="line">  Host        Path  Backends</span><br><span class="line">  ----        ----  --------</span><br><span class="line">  *           </span><br><span class="line">              /hello   hello:5678 (&lt;error: endpoints &quot;hello&quot; not found&gt;)</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line">Events:       &lt;none&gt;</span><br><span class="line">[root@master ~]# </span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/09/14/2023%E9%87%91%E7%A0%96%E9%84%82%E5%90%89%E6%B9%98%E9%BB%94%E6%A0%B7%E9%A2%98/" data-id="clz8f3fyg0003egvscmf99ubn" data-title="2023金砖鄂吉湘黔样题" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A0%B7%E9%A2%98/" rel="tag">样题</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/09/15/html5/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          html5
        
      </div>
    </a>
  
  
    <a href="/2023/09/13/2023%E9%87%91%E7%A0%96%E6%A0%B7%E9%A2%98/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">2023金砖样题</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/" rel="tag">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%B7%E9%A2%98/" rel="tag">样题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/html5/" style="font-size: 10px;">html5</a> <a href="/tags/%E6%A0%B7%E9%A2%98/" style="font-size: 20px;">样题</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 20px;">正则表达式</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/07/30/%E6%A0%B7%E9%A2%98%E6%80%BB%E7%BB%93/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/07/30/openstack%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/07/30/Mariadb%60Mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6my.cnf%E8%A7%A3%E7%AD%94/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/07/30/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2024/07/23/python%E4%BA%8C%E7%BA%A7/">python二级</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>